

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Benchmarking organizations with the Dimensions API &mdash; API Lab - reusable notebooks for research data analytics - powered by Dimensions Analytics API</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/js/custom.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "tex2jax_ignore|mathjax_ignore|document", "processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
        <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Generating a report that monitors research topics across Dimensions sources" href="../10-misc/1-report-content-volumes-per-year.html" />
    <link rel="prev" title="Using Dimensions organization groups with the API" href="6-organization-groups.html" />
    

   <script async src="https://www.googletagmanager.com/gtag/js?id=UA-149959808-1"></script>
   <!-- <script src="_static/js/custom.js"></script> -->


</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> DSL
          

          
            
            <img src="../../_static/dimensions-logo@2x.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          

   <p class="">
      <h3 id="cookbooks_title">API COOKBOOKS</h3>
   </p>


   
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../1-getting-started/0-Verifying-your-connection.html">Verifying Your API Connection</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/0-Verifying-your-connection.html#Technical-prerequisites">Technical prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/0-Verifying-your-connection.html#Connecting-to-the-API-using-a-key">Connecting to the API using a <code class="docutils literal notranslate"><span class="pre">key</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/0-Verifying-your-connection.html#Legacy-authentication-method:-username-&amp;-password">Legacy authentication method: username &amp; password</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/0-Verifying-your-connection.html#Troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../1-getting-started/1-Using-the-Dimcli-library-to-query-the-API.html">The Dimcli Python library: Installation and Querying</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/1-Using-the-Dimcli-library-to-query-the-API.html#Installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/1-Using-the-Dimcli-library-to-query-the-API.html#Authentication">Authentication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/1-Using-the-Dimcli-library-to-query-the-API.html#More-secure-method:-storing-a-private-credentials-file">More secure method: storing a private credentials file</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/1-Using-the-Dimcli-library-to-query-the-API.html#Querying">Querying</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/1-Using-the-Dimcli-library-to-query-the-API.html#Simple-Querying">Simple Querying</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/1-Using-the-Dimcli-library-to-query-the-API.html#Iterative-querying-(loops)">Iterative querying (loops)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/1-Using-the-Dimcli-library-to-query-the-API.html#Command-line-interface">Command line interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/1-Using-the-Dimcli-library-to-query-the-API.html#Running-the-CLI">Running the CLI</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../1-getting-started/3-Working-with-dataframes.html">The Dimcli Python library: Working with Pandas Dataframes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/3-Working-with-dataframes.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/3-Working-with-dataframes.html#1.-General-method-to-transform-JSON-query-results-into-a-dataframe">1. General method to transform JSON query results into a dataframe</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/3-Working-with-dataframes.html#2.-Dataframe-Methods-for-‘Publications’-queries">2. Dataframe Methods for ‘Publications’ queries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/3-Working-with-dataframes.html#Extracting-authors:-as_dataframe_authors">Extracting authors: <code class="docutils literal notranslate"><span class="pre">as_dataframe_authors</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/3-Working-with-dataframes.html#Extracting-Affiliations:-as_dataframe_authors_affiliations">Extracting Affiliations: <code class="docutils literal notranslate"><span class="pre">as_dataframe_authors_affiliations</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/3-Working-with-dataframes.html#3.-Dataframe-Methods-for-‘Grants’-queries">3. Dataframe Methods for ‘Grants’ queries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/3-Working-with-dataframes.html#Extracting-Funders:-as_dataframe_funders">Extracting Funders: <code class="docutils literal notranslate"><span class="pre">as_dataframe_funders</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/3-Working-with-dataframes.html#Extracting-investigators:-as_dataframe_investigators">Extracting investigators: <code class="docutils literal notranslate"><span class="pre">as_dataframe_investigators</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/3-Working-with-dataframes.html#4.-Dataframe-Methods-for-‘Concepts’-queries">4. Dataframe Methods for ‘Concepts’ queries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/3-Working-with-dataframes.html#Extracting-Concepts:-as_dataframe_concepts">Extracting Concepts: <code class="docutils literal notranslate"><span class="pre">as_dataframe_concepts</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/3-Working-with-dataframes.html#Conclusions">Conclusions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../1-getting-started/4-Dimcli-magic-commands.html">The Dimcli Python library: Magic Commands</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/4-Dimcli-magic-commands.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/4-Dimcli-magic-commands.html#Dimcli-‘magic’-commands">Dimcli ‘magic’ commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/4-Dimcli-magic-commands.html#Tip:-Accessing-data-returned-by-magic-queries">Tip: Accessing data returned by magic queries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/4-Dimcli-magic-commands.html#1.-Simple-queries-with-%dsl-or-%%dsl">1. Simple queries with <code class="docutils literal notranslate"><span class="pre">%dsl</span></code> or <code class="docutils literal notranslate"><span class="pre">%%dsl</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/4-Dimcli-magic-commands.html#2.-Loop-queries-with-%dslloop-or-%%dslloop">2. Loop queries with <code class="docutils literal notranslate"><span class="pre">%dslloop</span></code> or <code class="docutils literal notranslate"><span class="pre">%%dslloop</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/4-Dimcli-magic-commands.html#3.-Returning-dataframes:-%dsldf-and-%%dsldf">3. Returning dataframes: <code class="docutils literal notranslate"><span class="pre">%dsldf</span></code> and <code class="docutils literal notranslate"><span class="pre">%%dsldf</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/4-Dimcli-magic-commands.html#4.-Looped-dataframe-queries:-%dslloopdf-and-%%dslloopdf">4. Looped dataframe queries: <code class="docutils literal notranslate"><span class="pre">%dslloopdf</span></code> and <code class="docutils literal notranslate"><span class="pre">%%dslloopdf</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/4-Dimcli-magic-commands.html#5.-Getting-API-schema-documentation-with-%dsldocs">5. Getting API schema documentation with <code class="docutils literal notranslate"><span class="pre">%dsldocs</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../1-getting-started/2-Understanding-query-results.html">Exploring The Dimensions Search Language (DSL) - Quick Intro</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/2-Understanding-query-results.html#Prerequisites">Prerequisites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/2-Understanding-query-results.html#What-the-query-statistics-refer-to">What the query statistics refer to</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/2-Understanding-query-results.html#Working-with-fields">Working with fields</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/2-Understanding-query-results.html#Control-the-fields-you-return">Control the fields you return</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/2-Understanding-query-results.html#Make-a-mistake,-and-the-DSL-will-tell-you-what-fields-that-you-could-have-used">Make a mistake, and the DSL will tell you what fields that you could have used</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/2-Understanding-query-results.html#Full-text-search">Full text search</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/2-Understanding-query-results.html#A-simple-author-search">A simple author search</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/2-Understanding-query-results.html#..or-search-for-a-researcher-by-a-specific-id">..or search for a researcher by a specific id</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/2-Understanding-query-results.html#Sources-VS-Facets">Sources VS Facets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/2-Understanding-query-results.html#You-can-paginate-through-source-results-up-to-50000-rows">You can paginate through <em>source</em> results up to 50000 rows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/2-Understanding-query-results.html#You-can-return-max-1000-facet-rows">You can return max 1000 <code class="docutils literal notranslate"><span class="pre">facet</span></code> rows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/2-Understanding-query-results.html#Just-make-a-mistake,-and-you-will-ge-the-complete-list-of-available-facets">Just make a mistake, and you will ge the complete list of available facets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html">Exploring The Dimensions Search Language (DSL) - Deep Dive</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#What-is-the-Dimensions-Search-Language?">What is the Dimensions Search Language?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#Sections-Index">Sections Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#1.-Basic-query-structure">1. Basic query structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#search-source"><code class="docutils literal notranslate"><span class="pre">search</span> <span class="pre">source</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#return-result-(source-or-facet)"><code class="docutils literal notranslate"><span class="pre">return</span></code> result (source or facet)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#2.-Full-text-Searching">2. Full-text Searching</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#2.1-in-[search-index]">2.1 <code class="docutils literal notranslate"><span class="pre">in</span> <span class="pre">[search</span> <span class="pre">index]</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#2.2-for-&quot;search-term&quot;">2.2 <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">&quot;search</span> <span class="pre">term&quot;</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#2.3-Boolean-Operators">2.3 Boolean Operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#2.4-Wildcard-Searches">2.4 Wildcard Searches</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#2.5-Proximity-Searches">2.5 Proximity Searches</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#3.-Field-Searching">3. Field Searching</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#3.1-where">3.1 <code class="docutils literal notranslate"><span class="pre">where</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#3.2-in">3.2 <code class="docutils literal notranslate"><span class="pre">in</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#3.3-count---filter-function">3.3 <code class="docutils literal notranslate"><span class="pre">count</span></code> - filter function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#3.4-Filter-Operators">3.4 Filter Operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#3.5-Partial-string-matching-with-~">3.5 Partial string matching with <code class="docutils literal notranslate"><span class="pre">~</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#3.6-Emptiness-filters-is-empty">3.6 Emptiness filters <code class="docutils literal notranslate"><span class="pre">is</span> <span class="pre">empty</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#4.-Searching-for-Researchers">4. Searching for Researchers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#4.1-Exact-name-searches">4.1 Exact name searches</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#4.2-Fuzzy-Searches">4.2 Fuzzy Searches</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#4.3-Using-the-disambiguated-Researchers-database">4.3 Using the disambiguated Researchers database</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#5.-Returning-results">5. Returning results</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#5.1-Returning-Multiple-Sources">5.1 Returning Multiple Sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#5.2-Returning-Specific-Fields">5.2 Returning Specific Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#5.3-Returning-Facets">5.3 Returning Facets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#5.4-What-the-query-statistics-refer-to---sources-VS-facets">5.4 What the query statistics refer to - sources VS facets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#5.5-Paginating-Results">5.5 Paginating Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#5.6-Sorting-Results">5.6 Sorting Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#5.7-Unnesting-results">5.7 Unnesting results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#6.-Aggregations">6. Aggregations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#6.1-Complex-aggregations">6.1 Complex aggregations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#Publications-citations_per_year">Publications <code class="docutils literal notranslate"><span class="pre">citations_per_year</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../1-getting-started/5-Deep-dive-DSL-language.html#Grants-funding_per_year">Grants <code class="docutils literal notranslate"><span class="pre">funding_per_year</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../1-getting-started/6-Working-with-lists.html">Working with lists in the Dimensions API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/6-Working-with-lists.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/6-Working-with-lists.html#1.-How-do-we-use-lists-in-the-Dimensions-API?">1. How do we use lists in the Dimensions API?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/6-Working-with-lists.html#2.-What-are-all-the-things-that-we-can-make-lists-of-in-the-Dimensions-API?">2. What are all the things that we can make lists of in the Dimensions API?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/6-Working-with-lists.html#What-are-the-internal-Entities-that-we-might-put-in-a-list?">What are the internal Entities that we might put in a list?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/6-Working-with-lists.html#What-about-lists-of-ids?">What about lists of ids?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/6-Working-with-lists.html#What-are-the-external-entities-that-we-can-put-in-a-list?">What are the external entities that we can put in a list?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/6-Working-with-lists.html#3.-Making-a-list-from-the-results-of-a-query">3. Making a list from the results of a query</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/6-Working-with-lists.html#Putting-both-parts-of-this-example-together">Putting both parts of this example together</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/6-Working-with-lists.html#Doing-something-useful:-Get-all-the-publications-that-cite-my-publications">Doing something useful: Get all the publications that cite my publications</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/6-Working-with-lists.html#5.-How-Long-can-lists-get?">5. How Long can lists get?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/6-Working-with-lists.html#This-won’t-work">This won’t work</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/6-Working-with-lists.html#This-will">This will</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/6-Working-with-lists.html#What-if-I-need-a-very-long-list?">What if I need a very long list?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/6-Working-with-lists.html#6.-What-if-I-want-to-get-the-researchers-associated-with-the-publications-the-cite-my-institution?">6. What if I want to get the researchers associated with the publications the cite my institution?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/6-Working-with-lists.html#7.-What-if-I-want-to-get-all-the-researchers-associated-with-the-publications-that-cite-my-institution?">7. What if I want to get <em>all</em> the researchers associated with the publications that cite my institution?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/6-Working-with-lists.html#8.-..and-if-we-want-details-about-our-researchers,-we-can-put-our-list-of-researchers-into-the-researcher-API">8. ..and if we want details about our researchers, we can put our list of researchers into the researcher API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/6-Working-with-lists.html#9.-Patents-example-(patents--&gt;-publications)">9. Patents example (patents -&gt; publications)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/6-Working-with-lists.html#10.-Clinical-Trials-(clinical-trials--&gt;-publications)">10. Clinical Trials (clinical trials -&gt; publications)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/6-Working-with-lists.html#11.-Grants-(publications--&gt;-grants)">11. Grants (publications -&gt; grants)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/6-Working-with-lists.html#Conclusions">Conclusions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html">Working with <em>concepts</em> in the Dimensions API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#1.-Background:-What-are-concepts?">1. Background: What are <code class="docutils literal notranslate"><span class="pre">concepts</span></code>?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#1.1-From-concepts-to-dataframes:-Dimcli’s-as_dataframe_concepts-method">1.1 From concepts to dataframes: Dimcli’s <code class="docutils literal notranslate"><span class="pre">as_dataframe_concepts</span></code> method</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#1.2-Extracting-concepts-from-any-text">1.2 Extracting concepts from any text</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#2.-Data-acquisition:-retrieving-publications-and-all-their-associated-concepts">2. Data acquisition: retrieving publications and all their associated concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#2.1-Processing-concept-data">2.1 Processing concept data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#3.-Exploring-our-dataset:-basic-statistics-about-Publications-/-Concepts">3. Exploring our dataset: basic statistics about Publications / Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#3.1-Documents-With-concepts-VS-Without">3.1 Documents With concepts VS Without</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#3.2-Yearly-breakdown-of-Documents-With-concepts-VS-Without">3.2 Yearly breakdown of Documents With concepts VS Without</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#3.3-Concepts-frequency">3.3 Concepts frequency</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#3.4-Distribution-of-Concepts-Frequency">3.4 Distribution of Concepts Frequency</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#3.5-Yearly-breakdown:-unique-VS-repeated-concepts">3.5 Yearly breakdown: unique VS repeated concepts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#4.-Isolating-‘interesting’-concepts-using-frequency-and-score_avg">4. Isolating ‘interesting’ concepts using <code class="docutils literal notranslate"><span class="pre">frequency</span></code> and <code class="docutils literal notranslate"><span class="pre">score_avg</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#4.1-The-problem:-frequent-concepts-are-not-that-interesting!">4.1 The problem: frequent concepts are not <em>that</em> interesting!</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#4.2-Solution-1:-prefiltering-by-score_avg-and-sorting-by-frequency">4.2 Solution 1: prefiltering by <code class="docutils literal notranslate"><span class="pre">score_avg</span></code> and sorting by <code class="docutils literal notranslate"><span class="pre">frequency</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#4.3-Solution-2:-prefiltering-by-frequency-and-sorting-by-score_avg">4.3 Solution 2: prefiltering by <code class="docutils literal notranslate"><span class="pre">frequency</span></code> and sorting by <code class="docutils literal notranslate"><span class="pre">score_avg</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#5.-Analyses-By-Year">5. Analyses By Year</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#5.1-Adding-year-based-metrics-to-the-concepts-dataframe">5.1 Adding year-based metrics to the concepts dataframe</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#5.2-Charting-the-variation:-multi-year-visualization">5.2 Charting the variation: multi-year visualization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#6.-Conclusion">6. Conclusion</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#The-main-takeaways">The main takeaways</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-getting-started/7-Working-with-concepts.html#What-next">What next</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Publications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../2-publications/General-statistics.html">General Publication Statistics about a Research Organization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/General-statistics.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/General-statistics.html#Choose-a-Research-Organization">Choose a Research Organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/General-statistics.html#Publications-output-by-year">Publications output by year</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/General-statistics.html#Publications-most-cited-in-last-2-years">Publications most cited in last 2 years</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/General-statistics.html#Publications-most-cited---all-time">Publications most cited - all time</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/General-statistics.html#Publications-most-cited-:-which-research-areas?">Publications most cited : which research areas?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/General-statistics.html#Publications-most-cited-:-which-journals?">Publications most cited : which journals?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/General-statistics.html#Top-Funders-(by-aggregated-funding-amount)">Top Funders (by aggregated funding amount)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/General-statistics.html#Top-funders-split-by-country-of-the-funder">Top funders split by country of the funder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/General-statistics.html#Correlation-between-No-of-Publications-VS-Funding">Correlation between No of Publications VS Funding</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2-publications/Citation-Analysis.html">Citation Analysis: an Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Citation-Analysis.html#1.-Prerequisites">1. Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Citation-Analysis.html#Method-A:-getting-citations-for-one-publication-at-a-time">Method A: getting citations for one publication at a time</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Citation-Analysis.html#Comments-about-this-method">Comments about this method</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Citation-Analysis.html#Method-B:-Getting-citations-for-multiple-publications-via-a-single-query">Method B: Getting citations for multiple publications via a single query</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Citation-Analysis.html#Creating-a-second-level-citations-network">Creating a second-level citations network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Citation-Analysis.html#Building-a-Simple-Dataviz">Building a Simple Dataviz</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Citation-Analysis.html#Final-considerations">Final considerations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Citation-Analysis.html#Querying-for-more-than-1000-results">Querying for more than 1000 results</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Citation-Analysis.html#Querying-for-more-than-50K-results">Querying for more than 50K results</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Citation-Analysis.html#Dealing-with-highly-cited-publications">Dealing with highly cited publications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Citation-Analysis.html#Pre-checking-citations-counts">Pre-checking citations counts</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Citing-My-Organization.html">Citation Analysis: Journals Citing a Research Organization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Citing-My-Organization.html#1.-Prerequisites">1. Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Citing-My-Organization.html#2.-Choose-a-Research-Organization">2. Choose a Research Organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Citing-My-Organization.html#3.-Building-a-Publications-Baseset">3. Building a Publications Baseset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Citing-My-Organization.html#4.-Extracting-Publications-Citing-the-Baseset">4. Extracting Publications Citing the Baseset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Citing-My-Organization.html#5.-Journal-Analysis">5. Journal Analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Citing-My-Organization.html#Number-of-Unique-journals">Number of Unique journals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Citing-My-Organization.html#Most-frequent-journals">Most frequent journals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Citing-My-Organization.html#Top-100-journals-chart">Top 100 journals chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Citing-My-Organization.html#Top-20-journals-by-year-chart">Top 20 journals by year chart</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Cited-By-My-Organization.html">Citation Analysis: Journals Cited by a Research Organization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Cited-By-My-Organization.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Cited-By-My-Organization.html#1.-Choosing-a-Research-Organization">1. Choosing a Research Organization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Cited-By-My-Organization.html#1.1-Selecting-a-Field-of-Research-ID">1.1 Selecting a Field of Research ID</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Cited-By-My-Organization.html#2.-Getting-the-IDs-of-the-outgoing-citations">2. Getting the IDs of the outgoing citations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Cited-By-My-Organization.html#2.1-Removing-duplicates-and-counting-most-frequent-citations">2.1 Removing duplicates and counting most frequent citations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Cited-By-My-Organization.html#3.-Enriching-the-citations-IDs-with-other-publication-metadata">3. Enriching the citations IDs with other publication metadata</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Cited-By-My-Organization.html#3.1-Adding-the-citations-counts">3.1 Adding the citations counts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Cited-By-My-Organization.html#4.-Journal-Analysis">4. Journal Analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Cited-By-My-Organization.html#4.1-Number-of-Unique-journals">4.1 Number of Unique journals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Cited-By-My-Organization.html#4.2-Most-frequent-journals">4.2 Most frequent journals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Cited-By-My-Organization.html#4.3-Top-50-journals-chart,-by-publisher">4.3 Top 50 journals chart, by publisher</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Cited-By-My-Organization.html#4.4-Top-20-journals-by-year-of-the-cited-publication">4.4 Top 20 journals by year of the cited publication</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Which-Are-the-Journals-Cited-By-My-Organization.html#Conclusions">Conclusions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2-publications/Journal-Profile-1-Gathering-data.html">Journal Profiling Part 1: Getting the Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-1-Gathering-data.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-1-Gathering-data.html#Selecting-a-Journal-and-Extracting-All-Publications-Metadata">Selecting a Journal and Extracting All Publications Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-1-Gathering-data.html#Basic-stats-about-authors">Basic stats about authors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-1-Gathering-data.html#A-quick-look-at-authors-without-a-Dimensions-Researcher-ID">A quick look at authors <em>without</em> a Dimensions Researcher ID</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Journal-Profile-1-Gathering-data.html#Any-common-patterns?">Any common patterns?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Journal-Profile-1-Gathering-data.html#Creating-an-export-for-manual-curation">Creating an export for manual curation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2-publications/Journal-Profile-2-Researchers-Impact-Metrics.html">Journal Profiling Part 2: Impact Metrics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-2-Researchers-Impact-Metrics.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-2-Researchers-Impact-Metrics.html#Measuring-the-Impact-of-Researchers-within-a-Journal">Measuring the Impact of Researchers within a Journal</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Journal-Profile-2-Researchers-Impact-Metrics.html#Load-the-publications-and-authors-data-previously-saved">Load the publications and authors data previously saved</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Journal-Profile-2-Researchers-Impact-Metrics.html#Isolate-the-Researchers-data-(=-authors-with-an-ID)">Isolate the Researchers data (= authors with an ID)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Journal-Profile-2-Researchers-Impact-Metrics.html#Enrich-the-data-with-Impact-Statistics">Enrich the data with Impact Statistics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-2-Researchers-Impact-Metrics.html#Couple-of-Dataviz">Couple of Dataviz</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2-publications/Journal-Profile-3-Funding-of-Researchers.html">Journal Profiling Part 3: Funding</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-3-Funding-of-Researchers.html#Prerequisites">Prerequisites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Journal-Profile-3-Funding-of-Researchers.html#Load-previously-saved-researchers-data">Load previously saved researchers data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-3-Funding-of-Researchers.html#Adding-another-impact-measure:-funding">Adding another impact measure: funding</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Journal-Profile-3-Funding-of-Researchers.html#We’ll-have-to-do-it-in-two-steps">We’ll have to do it in two steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-3-Funding-of-Researchers.html#Next:-full-data-for-step-1">Next: full data for step 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-3-Funding-of-Researchers.html#Next:-full-data-for-step-2">Next: full data for step 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-3-Funding-of-Researchers.html#Finally:-let’s-merge-the-new-data-into-the-‘researchers-impact’-table">Finally: let’s merge the new data into the ‘researchers-impact’ table</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-3-Funding-of-Researchers.html#Couple-of-Dataviz">Couple of Dataviz</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2-publications/Journal-Profile-4-Institutions.html">Journal Profiling Part 4: Institutions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-4-Institutions.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-4-Institutions.html#Institutions-Contributing-to-a-Journal">Institutions Contributing to a Journal</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Journal-Profile-4-Institutions.html#Load-previously-saved-affiliations-data">Load previously saved affiliations data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-4-Institutions.html#Basic-stats-about-affiliations">Basic stats about affiliations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-4-Institutions.html#Enriching-the-unique-affiliations-(GRIDs-list)-with-pubs-count-and-authors-count">Enriching the unique affiliations (GRIDs list) with pubs count and authors count</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-4-Institutions.html#Couple-of-Dataviz">Couple of Dataviz</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2-publications/Journal-Profile-5-Competitive-Analysis.html">Journal Profiling Part 5: Competing Journals Analysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-5-Competitive-Analysis.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-5-Competitive-Analysis.html#Competing-Journals">Competing Journals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Journal-Profile-5-Competitive-Analysis.html#First-let’s-reload-the-data-obtained-in-previous-steps">First let’s reload the data obtained in previous steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2-publications/Journal-Profile-5-Competitive-Analysis.html#What-the-query-looks-like">What the query looks like</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-5-Competitive-Analysis.html#Extracting-all-publications/journals-information">Extracting all publications/journals information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Journal-Profile-5-Competitive-Analysis.html#Visualizations">Visualizations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2-publications/Simple-topic-analysis.html">Topic Modeling Analysis for a Set of Publications: Basic Workflow</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Simple-topic-analysis.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Simple-topic-analysis.html#1.-Creating-a-Dataset:-e.g. Publications-from-a-Research-Organization">1. Creating a Dataset: e.g. Publications from a Research Organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Simple-topic-analysis.html#2.-Concepts:-exploratory-analysis">2. Concepts: exploratory analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Simple-topic-analysis.html#3.-Building-a-word-cloud-visualization">3. Building a word-cloud visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Simple-topic-analysis.html#4.-Trend-analysis---‘emerging’-new-topics-each-year">4. Trend analysis - ‘emerging’ new topics each year</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Simple-topic-analysis.html#5.-Trend-Analysis:-topics-growth">5. Trend Analysis: topics growth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Simple-topic-analysis.html#6.-Trend-analysis:-growth-distribution-based-on-selected-years">6. Trend analysis: growth distribution based on selected years</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Simple-topic-analysis.html#7.-Conclusion">7. Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2-publications/Concepts-network-graph.html">Building a concepts co-occurence network</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Concepts-network-graph.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Concepts-network-graph.html#Step-1:-Creating-a-dataset">Step 1: Creating a dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Concepts-network-graph.html#Step-2:-Building-a-concepts-co-occurrence-network">Step 2: Building a concepts co-occurrence network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Concepts-network-graph.html#Step-3:-Visualizing-the-network">Step 3: Visualizing the network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-publications/Concepts-network-graph.html#Conclusions">Conclusions</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Grants</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../3-grants/1-grants-enrichment-matching-records-to-dimensions.html">Enriching Grants part 1: Matching your grants records to Dimensions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/1-grants-enrichment-matching-records-to-dimensions.html#A-sample-grants-list">A sample grants list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/1-grants-enrichment-matching-records-to-dimensions.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/1-grants-enrichment-matching-records-to-dimensions.html#Loading-the-sample-grants-data">Loading the sample grants data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/1-grants-enrichment-matching-records-to-dimensions.html#Matching-grants-data">Matching grants data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../3-grants/1-grants-enrichment-matching-records-to-dimensions.html#A)-Matching-grants-when-we-have-a-grant-number">A) Matching grants when we have a grant number</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3-grants/1-grants-enrichment-matching-records-to-dimensions.html#B)-What-if-we-don’t-have-a-grant-number?">B) What if we don’t have a grant number?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/1-grants-enrichment-matching-records-to-dimensions.html#Back-to-our-grants-list">Back to our grants list</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../3-grants/1-grants-enrichment-matching-records-to-dimensions.html#Enriching-the-original-list">Enriching the original list</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../3-grants/2-grants-enrichment-adding-publications-information.html">Enriching Grants part 2: Adding Publications Information from Dimensions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/2-grants-enrichment-adding-publications-information.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/2-grants-enrichment-adding-publications-information.html#Reusing-the-sample-grants-data-from-part-1">Reusing the sample grants data from part-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/2-grants-enrichment-adding-publications-information.html#Extracting-linked-Publications-data-from-Dimensions">Extracting linked Publications data from Dimensions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../3-grants/2-grants-enrichment-adding-publications-information.html#Building-a-looped-extraction">Building a looped extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3-grants/2-grants-enrichment-adding-publications-information.html#Final-step:-grouping-publications-by-grant">Final step: grouping publications by grant</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/2-grants-enrichment-adding-publications-information.html#Data-Exploration">Data Exploration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../3-grants/2-grants-enrichment-adding-publications-information.html#Publications-per-grant-by-year-and-funding-amount">Publications per grant by year and funding amount</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3-grants/2-grants-enrichment-adding-publications-information.html#Publications-per-grant-by-country">Publications per grant by country</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3-grants/2-grants-enrichment-adding-publications-information.html#Correlation-of-num-of-publications-to-grant-length">Correlation of num of publications to grant length</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3-grants/2-grants-enrichment-adding-publications-information.html#Publications-by-grant-funder">Publications by grant funder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3-grants/2-grants-enrichment-adding-publications-information.html#Publications-by-grant-funder-vs-funding-amount">Publications by grant funder vs funding amount</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/2-grants-enrichment-adding-publications-information.html#Conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../3-grants/3-grants-enrichment-adding-patents-cltrials-information.html">Enriching Grants part 3: adding related Patents and Clinical Trials data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/3-grants-enrichment-adding-patents-cltrials-information.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/3-grants-enrichment-adding-patents-cltrials-information.html#Reusing-the-enriched-grants-data-from-part-2">Reusing the enriched grants data from part-2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/3-grants-enrichment-adding-patents-cltrials-information.html#Extracting-linked-Patents-data">Extracting linked Patents data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/3-grants-enrichment-adding-patents-cltrials-information.html#Extracting-linked-Clinical-Trials-data">Extracting linked Clinical Trials data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/3-grants-enrichment-adding-patents-cltrials-information.html#Data-Exploration">Data Exploration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../3-grants/3-grants-enrichment-adding-patents-cltrials-information.html#How-many-linked-objects-overall?">How many linked objects overall?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3-grants/3-grants-enrichment-adding-patents-cltrials-information.html#Patents-and-Clinical-Trials-by-Year">Patents and Clinical Trials by Year</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3-grants/3-grants-enrichment-adding-patents-cltrials-information.html#Patents-and-Clinical-Trials-by-Grant-Funder">Patents and Clinical Trials by Grant Funder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3-grants/3-grants-enrichment-adding-patents-cltrials-information.html#Exploring-Correlations-between-dimensions">Exploring Correlations between dimensions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/3-grants-enrichment-adding-patents-cltrials-information.html#Conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../3-grants/4-grants-topic-analysis.html">Identifying emerging topics in grants using ‘concepts’</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/4-grants-topic-analysis.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/4-grants-topic-analysis.html#1.-Creating-a-Dataset:-e.g. Grants-from-a-Funder">1. Creating a Dataset: e.g. Grants from a Funder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/4-grants-topic-analysis.html#2.-A-first-look-at-the-concepts-we-extracted">2. A first look at the concepts we extracted</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/4-grants-topic-analysis.html#3.-Building-a-word-cloud-visualization">3. Building a word-cloud visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/4-grants-topic-analysis.html#4.-Trend-analysis---‘emerging’-new-topics-each-year">4. Trend analysis - ‘emerging’ new topics each year</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/4-grants-topic-analysis.html#5.-Segmenting-results-using-the-fields-of-research-categories">5. Segmenting results using the fields of research categories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/4-grants-topic-analysis.html#6.-Conclusion">6. Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../3-grants/5-grants-from-researchers.html">Getting all grants received by a list of researchers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/5-grants-from-researchers.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/5-grants-from-researchers.html#1.-Starting-point:-a-list-of-researchers">1. Starting point: a list of researchers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/5-grants-from-researchers.html#2.-What-Grants-have-been-received-by-these-researchers?">2. What Grants have been received by these researchers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3-grants/5-grants-from-researchers.html#3.-Data-Exploration">3. Data Exploration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../3-grants/5-grants-from-researchers.html#Grants-by-year">Grants by year</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3-grants/5-grants-from-researchers.html#Grants-by-funders">Grants by funders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3-grants/5-grants-from-researchers.html#Funders-by-funding-amount">Funders by funding amount</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Clinical Trials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../4-clinical-trials/Clinical_Trials_by_Volume_of_Pubs.html">Clinical Trials by Volume of Publications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../4-clinical-trials/Clinical_Trials_by_Volume_of_Pubs.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../4-clinical-trials/Clinical_Trials_by_Volume_of_Pubs.html#Query-for-Clinical-Trials">Query for Clinical Trials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../4-clinical-trials/Clinical_Trials_by_Volume_of_Pubs.html#Counting-publications-per-clinical-trial">Counting publications per clinical trial</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Patents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../5-patents/0-introducing-patents.html">The Patents API: Features Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../5-patents/0-introducing-patents.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../5-patents/0-introducing-patents.html#1.-Sample-Patents-Queries">1. Sample Patents Queries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../5-patents/0-introducing-patents.html#Searching-patents-by-keyword">Searching patents by keyword</a></li>
<li class="toctree-l3"><a class="reference internal" href="../5-patents/0-introducing-patents.html#Searching-using-fielded-search">Searching using fielded search</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../5-patents/0-introducing-patents.html#Searching-using-dates">Searching using dates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../5-patents/0-introducing-patents.html#Extracting-cited-publications-via-publication_ids">Extracting cited publications via <code class="docutils literal notranslate"><span class="pre">publication_ids</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../5-patents/0-introducing-patents.html#Extracting-cited-patents-via-reference_ids">Extracting cited patents via <code class="docutils literal notranslate"><span class="pre">reference_ids</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../5-patents/0-introducing-patents.html#Aggregating-results-using-facets">Aggregating results using facets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../5-patents/0-introducing-patents.html#Top-assignees">Top assignees</a></li>
<li class="toctree-l4"><a class="reference internal" href="../5-patents/0-introducing-patents.html#Top-researchers">Top researchers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../5-patents/0-introducing-patents.html#Top-FOR-categories">Top FOR categories</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../5-patents/0-introducing-patents.html#2.-A-closer-look-at-Patents-statistics">2. A closer look at Patents statistics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../5-patents/0-introducing-patents.html#Counting-records-per-each-field">Counting records per each field</a></li>
<li class="toctree-l3"><a class="reference internal" href="../5-patents/0-introducing-patents.html#Creating-a-bar-chart">Creating a bar chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../5-patents/0-introducing-patents.html#Counting-the-yearly-distribution-of-field/records-data">Counting the yearly distribution of field/records data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../5-patents/0-introducing-patents.html#Creating-a-line-chart">Creating a line chart</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../5-patents/0-introducing-patents.html#Where-to-find-out-more">Where to find out more</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../5-patents/1-Patents-referencing-a-Research-Organization.html">Measuring the Innovation Impact of an Organization using Patents Citations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../5-patents/1-Patents-referencing-a-Research-Organization.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../5-patents/1-Patents-referencing-a-Research-Organization.html#1.-Choosing-a-GRID-Research-Organization">1. Choosing a GRID Research Organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../5-patents/1-Patents-referencing-a-Research-Organization.html#2.-Extracting-Publications-Data">2. Extracting Publications Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../5-patents/1-Patents-referencing-a-Research-Organization.html#Quick-look-at-publications-statistics">Quick look at publications statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../5-patents/1-Patents-referencing-a-Research-Organization.html#What-are-the-main-subject-areas?">What are the main subject areas?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../5-patents/1-Patents-referencing-a-Research-Organization.html#3.-Extracting-Patents-linked-to-Publications">3. Extracting Patents linked to Publications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../5-patents/1-Patents-referencing-a-Research-Organization.html#Enriching-publications-with-patents-citations-metrics">Enriching publications with patents citations metrics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../5-patents/1-Patents-referencing-a-Research-Organization.html#4.-Patents-Data-Analysis">4. Patents Data Analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../5-patents/1-Patents-referencing-a-Research-Organization.html#How-many-patents-per-year?">How many patents per year?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../5-patents/1-Patents-referencing-a-Research-Organization.html#Who-is-filing-the-patents?">Who is filing the patents?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../5-patents/1-Patents-referencing-a-Research-Organization.html#What-are-the-publications-most-frequenlty-referenced-in-patents?">What are the publications most frequenlty referenced in patents?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../5-patents/1-Patents-referencing-a-Research-Organization.html#What-are-the-main-subject-areas-of-referenced-publications?">What are the main subject areas of referenced publications?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../5-patents/1-Patents-referencing-a-Research-Organization.html#Is-there-a-correlation-between-publication-citations-and-patents-citations?">Is there a correlation between publication citations and patents citations?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../5-patents/1-Patents-referencing-a-Research-Organization.html#Where-to-go-from-here">Where to go from here</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../5-patents/2-Patent-Family-Citing-Publications.html">Patent publication references, for an entire patent family</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../5-patents/2-Patent-Family-Citing-Publications.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../5-patents/2-Patent-Family-Citing-Publications.html#1.-Search-for-the-patent-ID-and-return-the-family-ID.">1. Search for the patent ID and return the family ID.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../5-patents/2-Patent-Family-Citing-Publications.html#2.-Use-the-family-ID-to-search-for-all-related-patents-and-return-the-publications-IDs-they-reference">2. Use the family ID to search for all related patents and return the publications IDs they reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../5-patents/2-Patent-Family-Citing-Publications.html#3.-Enriching-the-publication-IDs-with-additional-metadata">3. Enriching the publication IDs with additional metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../5-patents/2-Patent-Family-Citing-Publications.html#4.-Combine-the-publication-metadata-with-the-patent-citations-information">4. Combine the publication metadata with the patent citations information</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../5-patents/2-Patent-Family-Citing-Publications.html#4.1-Optional:-exporting-the-data-to-google-sheets">4.1 Optional: exporting the data to google sheets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../5-patents/2-Patent-Family-Citing-Publications.html#Conclusions">Conclusions</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Datasets</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../9-datasets/1-introducing-datasets.html">The Datasets API: Features Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../9-datasets/1-introducing-datasets.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../9-datasets/1-introducing-datasets.html#1.-Sample-Dataset-Queries">1. Sample Dataset Queries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../9-datasets/1-introducing-datasets.html#Searching-datasets-by-keyword">Searching datasets by keyword</a></li>
<li class="toctree-l3"><a class="reference internal" href="../9-datasets/1-introducing-datasets.html#Returning-associated-grants-and-publication-data">Returning associated grants and publication data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../9-datasets/1-introducing-datasets.html#Searching-using-fielded-search">Searching using fielded search</a></li>
<li class="toctree-l3"><a class="reference internal" href="../9-datasets/1-introducing-datasets.html#Extracting-related-funding-via-grants">Extracting related funding via grants</a></li>
<li class="toctree-l3"><a class="reference internal" href="../9-datasets/1-introducing-datasets.html#Aggregating-results-using-facets">Aggregating results using facets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../9-datasets/1-introducing-datasets.html#Top-funders">Top funders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../9-datasets/1-introducing-datasets.html#Top-research-organizations">Top research organizations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../9-datasets/1-introducing-datasets.html#Top-contributors">Top contributors</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../9-datasets/1-introducing-datasets.html#2.-A-closer-look-at-Datasets-statistics">2. A closer look at Datasets statistics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../9-datasets/1-introducing-datasets.html#Counting-records-per-each-field">Counting records per each field</a></li>
<li class="toctree-l3"><a class="reference internal" href="../9-datasets/1-introducing-datasets.html#Creating-a-bar-chart">Creating a bar chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../9-datasets/1-introducing-datasets.html#Counting-the-yearly-distribution-of-field/records-data">Counting the yearly distribution of field/records data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../9-datasets/1-introducing-datasets.html#Creating-a-line-chart">Creating a line chart</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../9-datasets/1-introducing-datasets.html#Where-to-find-out-more">Where to find out more</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Researchers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../7-researchers/Calculating-the-H-Index-of-a-researcher.html">Calculating the H-index of a researcher</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../7-researchers/Calculating-the-H-Index-of-a-researcher.html#Background">Background</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/Calculating-the-H-Index-of-a-researcher.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/Calculating-the-H-Index-of-a-researcher.html#Selecting-a-researcher">Selecting a researcher</a></li>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/Calculating-the-H-Index-of-a-researcher.html#The-H-Index-function">The H-Index function</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../7-researchers/Calculating-the-H-Index-of-a-researcher.html#Getting-citations-data-from-Dimensions">Getting citations data from Dimensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../7-researchers/Calculating-the-H-Index-of-a-researcher.html#Wrapping-things-up">Wrapping things up</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/Calculating-the-H-Index-of-a-researcher.html#Where-to-find-out-more">Where to find out more</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../7-researchers/Researchers-Search-tips-V2.html">Extracting researchers based on affiliations and publications history</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../7-researchers/Researchers-Search-tips-V2.html#Prerequisites">Prerequisites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/Researchers-Search-tips-V2.html#Select-an-organization-ID">Select an organization ID</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../7-researchers/Researchers-Search-tips-V2.html#Background:-understanding-the-data-model">Background: understanding the data model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../7-researchers/Researchers-Search-tips-V2.html#Methodology:-two-options-available">Methodology: two options available</a></li>
<li class="toctree-l2"><a class="reference internal" href="../7-researchers/Researchers-Search-tips-V2.html#Approach-1.-From-publications-to-researchers">Approach 1. From publications to researchers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../7-researchers/Researchers-Search-tips-V2.html#Approach-2.-From-researchers-to-publications">Approach 2. From researchers to publications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../7-researchers/Researchers-Search-tips-V2.html#Conclusions">Conclusions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../7-researchers/Experts-search-introduction.html">Expert Identification with the Dimensions API - An Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../7-researchers/Experts-search-introduction.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../7-researchers/Experts-search-introduction.html#At-a-glance">At a glance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../7-researchers/Experts-search-introduction.html#Step-1:-Concept-Extraction">Step 1: Concept Extraction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/Experts-search-introduction.html#What-are-concepts?">What are concepts?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/Experts-search-introduction.html#Extracting-concepts-with-the-DSL">Extracting concepts with the DSL</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../7-researchers/Experts-search-introduction.html#Step-2:-Expert-Identification">Step 2: Expert Identification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/Experts-search-introduction.html#Example-1.-Basic-query-using-concepts">Example 1. Basic query using <code class="docutils literal notranslate"><span class="pre">concepts</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/Experts-search-introduction.html#Example-2.-Query-with-OR-connectors">Example 2. Query with <code class="docutils literal notranslate"><span class="pre">OR</span></code> connectors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/Experts-search-introduction.html#Example-3.-Query-with-where-filters">Example 3. Query with <code class="docutils literal notranslate"><span class="pre">where</span></code> filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/Experts-search-introduction.html#Example-4.-Adding-Overlap-Annotations-(eg-for-conflict-of-interests-checks)">Example 4. Adding Overlap Annotations (eg for conflict of interests checks)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/Experts-search-introduction.html#Example-5.-Query-with-MUST/NOT-Operators">Example 5. Query with MUST/NOT Operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/Experts-search-introduction.html#Example-6.-MUST-together-with-AND/OR">Example 6. MUST together with AND/OR</a></li>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/Experts-search-introduction.html#Example-7.-Wildcard-searches">Example 7. Wildcard searches</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../7-researchers/Experts-search-introduction.html#Additional-resources:-shortcut-functions-included-in-Dimcli">Additional resources: shortcut functions included in Dimcli</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/Experts-search-introduction.html#extract_concepts">extract_concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/Experts-search-introduction.html#identify_experts">identify_experts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/Experts-search-introduction.html#Build-a-reviewers-matrix">Build a reviewers matrix</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../7-researchers/funders-reviewers-identification-globally-and-among-panels.html">Identification of reviewers for funders: Globally and among Panels</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../7-researchers/funders-reviewers-identification-globally-and-among-panels.html#Introduction:-Use-Cases-For-Reviewer-Identification">Introduction: Use Cases For Reviewer Identification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/funders-reviewers-identification-globally-and-among-panels.html#Kinds-of-identification">Kinds of identification</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../7-researchers/funders-reviewers-identification-globally-and-among-panels.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../7-researchers/funders-reviewers-identification-globally-and-among-panels.html#1.-Loading-and-preprocessing-text-data">1. Loading and preprocessing text data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/funders-reviewers-identification-globally-and-among-panels.html#1.1-Loading-from-File-(placeholder-code)">1.1 Loading from File (placeholder code)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/funders-reviewers-identification-globally-and-among-panels.html#1.2-Loading-Sample-Data">1.2 Loading Sample Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/funders-reviewers-identification-globally-and-among-panels.html#1.3-Preprocess-data-and-extract-concepts">1.3 Preprocess data and extract concepts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../7-researchers/funders-reviewers-identification-globally-and-among-panels.html#2.-The-Two-Use-Cases---Recap">2. The Two Use Cases - Recap</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/funders-reviewers-identification-globally-and-among-panels.html#2.1-Global-identification-use-case">2.1 Global identification use case</a></li>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/funders-reviewers-identification-globally-and-among-panels.html#2.2-Panel-identification-use-case">2.2 Panel identification use case</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../7-researchers/funders-reviewers-identification-globally-and-among-panels.html#3.-Global-identification">3. Global identification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../7-researchers/funders-reviewers-identification-globally-and-among-panels.html#3.1-Advanced-Cases:-Working-around-the-limitations-of-global-search">3.1 Advanced Cases: Working around the limitations of global search</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../7-researchers/funders-reviewers-identification-globally-and-among-panels.html#3.1.1-Searching-based-on-organizational-affiliation">3.1.1 Searching based on organizational affiliation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../7-researchers/funders-reviewers-identification-globally-and-among-panels.html#3.1.2-Searching-based-on-previous-funding-history">3.1.2 Searching based on previous funding history</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../7-researchers/funders-reviewers-identification-globally-and-among-panels.html#4.-Panel-Identification">4. Panel Identification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../7-researchers/funders-reviewers-identification-globally-and-among-panels.html#Conclusions">Conclusions</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Organizations</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="1-GRID-preview.html">The Organizations API: Features Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="1-GRID-preview.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="1-GRID-preview.html#1.-Matching-affiliation-data-to-GRID-IDs-using-extract_affiliations">1. Matching affiliation data to GRID IDs using <code class="docutils literal notranslate"><span class="pre">extract_affiliations</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="1-GRID-preview.html#2.-Searching-GRID-organizations">2. Searching GRID organizations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="1-GRID-preview.html#Full-text-search">Full-text search</a></li>
<li class="toctree-l3"><a class="reference internal" href="1-GRID-preview.html#Fielded-search">Fielded search</a></li>
<li class="toctree-l3"><a class="reference internal" href="1-GRID-preview.html#Returning-facets">Returning facets</a></li>
<li class="toctree-l3"><a class="reference internal" href="1-GRID-preview.html#Returning-organizations-facets-from-publications">Returning organizations facets from publications</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="1-GRID-preview.html#3.-A-closer-look-at-the-organizations-data-statistics">3. A closer look at the organizations data statistics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="1-GRID-preview.html#Let’s-visualize-the-data-with-plotly">Let’s visualize the data with plotly</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="1-GRID-preview.html#Where-to-find-out-more">Where to find out more</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="2-Industry-Collaboration.html">Identifying the Industry Collaborators of an Academic Institution</a><ul>
<li class="toctree-l2"><a class="reference internal" href="2-Industry-Collaboration.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-Industry-Collaboration.html#1.-Selecting-an-academic-institution">1. Selecting an academic institution</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-Industry-Collaboration.html#2.-Extracting-publications-from-industry-collaborations">2. Extracting publications from industry collaborations</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-Industry-Collaboration.html#3.-Analyses">3. Analyses</a><ul>
<li class="toctree-l3"><a class="reference internal" href="2-Industry-Collaboration.html#3.1-Count-of-Publications-per-year-from-Industry-Collaborations">3.1 Count of Publications per year from Industry Collaborations</a></li>
<li class="toctree-l3"><a class="reference internal" href="2-Industry-Collaboration.html#3.2-Citations-from-Industry-Collaboration">3.2 Citations from Industry Collaboration</a></li>
<li class="toctree-l3"><a class="reference internal" href="2-Industry-Collaboration.html#3.3-Top-Industry-Collaborators">3.3 Top Industry Collaborators</a></li>
<li class="toctree-l3"><a class="reference internal" href="2-Industry-Collaboration.html#3.4-Countries-of-Industry-Collaborators">3.4 Countries of Industry Collaborators</a></li>
<li class="toctree-l3"><a class="reference internal" href="2-Industry-Collaboration.html#3.5-Putting-Countries-and-Collaborators-together">3.5 Putting Countries and Collaborators together</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="3-Organizations-Collaboration-Network.html">Building an Organizations Collaboration Network Diagram</a><ul>
<li class="toctree-l2"><a class="reference internal" href="3-Organizations-Collaboration-Network.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-Organizations-Collaboration-Network.html#1.-Choose-an-Organization-and-a-keyword-(topic)">1. Choose an Organization and a keyword (topic)</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-Organizations-Collaboration-Network.html#2.-Building-a-one-degree-network-of-collaborating-institutions">2. Building a one-degree network of collaborating institutions</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-Organizations-Collaboration-Network.html#3.-Building-a-network-of-any-size">3. Building a network of any size</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-Organizations-Collaboration-Network.html#4.-Visualizing-the-network">4. Visualizing the network</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-Organizations-Collaboration-Network.html#5.-Addendum:-showing-only-‘Government’-collaborators">5. Addendum: showing only ‘Government’ collaborators</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-Organizations-Collaboration-Network.html#Conclusions">Conclusions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="4-international-collaboration-by-year.html">Collaboration Patterns By Year (International, Domestic, Internal)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="4-international-collaboration-by-year.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="4-international-collaboration-by-year.html#1.-Lookup-the-University-that-you-are-interested-in">1. Lookup the University that you are interested in</a></li>
<li class="toctree-l2"><a class="reference internal" href="4-international-collaboration-by-year.html#2.-Publications-output-by-year">2. Publications output by year</a></li>
<li class="toctree-l2"><a class="reference internal" href="4-international-collaboration-by-year.html#3.-International-publications">3. International publications</a></li>
<li class="toctree-l2"><a class="reference internal" href="4-international-collaboration-by-year.html#4.-Domestic">4. Domestic</a></li>
<li class="toctree-l2"><a class="reference internal" href="4-international-collaboration-by-year.html#5.-Internal">5. Internal</a></li>
<li class="toctree-l2"><a class="reference internal" href="4-international-collaboration-by-year.html#6.-Joining-up-All-metrics-together">6. Joining up All metrics together</a></li>
<li class="toctree-l2"><a class="reference internal" href="4-international-collaboration-by-year.html#7.-How-does-this-compare-to-Australia?">7. How does this compare to Australia?</a></li>
<li class="toctree-l2"><a class="reference internal" href="4-international-collaboration-by-year.html#8.-How-does-this-compare-to-a-different-Institution-(University-of-Toronto)?">8. How does this compare to a different Institution (University of Toronto)?</a></li>
<li class="toctree-l2"><a class="reference internal" href="4-international-collaboration-by-year.html#Want-to-learn-more?">Want to learn more?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="5-mapping-grid-ids-to-organization-data.html">Mapping GRID IDs to Organization Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="5-mapping-grid-ids-to-organization-data.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="5-mapping-grid-ids-to-organization-data.html#1.-Importing-Organization-Data">1. Importing Organization Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="5-mapping-grid-ids-to-organization-data.html#1.1-Manually-Generate-Organization-Data">1.1 Manually Generate Organization Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="5-mapping-grid-ids-to-organization-data.html#1.2-Load-Organization-Data-from-Local-Machine">1.2 Load Organization Data from Local Machine</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="5-mapping-grid-ids-to-organization-data.html#2.-Utilizing-Dimensions-API-to-Extract-GRID-IDs">2. Utilizing Dimensions API to Extract GRID IDs</a></li>
<li class="toctree-l2"><a class="reference internal" href="5-mapping-grid-ids-to-organization-data.html#3.-Save-the-GRID-ID-Dataset-we-created">3. Save the GRID ID Dataset we created</a></li>
<li class="toctree-l2"><a class="reference internal" href="5-mapping-grid-ids-to-organization-data.html#Conclusions">Conclusions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="6-organization-groups.html">Using Dimensions organization groups with the API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="6-organization-groups.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="6-organization-groups.html#1.-Downloading-groups-data-from-Dimensions">1. Downloading groups data from Dimensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="6-organization-groups.html#2.-Using-group-data-with-the-API">2. Using group data with the API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="6-organization-groups.html#How-many-grants-from-the-NSF?">How many grants from the NSF?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Benchmarking organizations with the Dimensions API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#1.-Quick-benchmarking-using-the-API">1. Quick benchmarking using the API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#2.-Calculating-more-complex-‘Quality’-Benchmarking-indicators:-Number-of-articles-in-the-top-X-percent-of-research-their-category">2. Calculating more complex ‘Quality’ Benchmarking indicators: Number of articles in the top X percent of research their category</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Step-1.-retrieve-the-total-volume-of-publications-by-volume.-(focusing-on-Fields-of-Research)">Step 1. retrieve the total volume of publications by volume. (focusing on Fields of Research)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Step-1.2.-…-Need-to-filter-for-level-2-codes">Step 1.2. … Need to filter for level 2 codes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Step-2.-calculate-1%-of-the-total-number-of-records-by-category.-This-will-be-used-to-retrieve-the-1%-boundary-record..">Step 2. calculate 1% of the total number of records by category. This will be used to retrieve the 1% boundary record..</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Step-3.-Use-the-cutoff-value-to-get-the-indicator-value-for-the-1%-boundary">Step 3. Use the cutoff value to get the indicator value for the 1% boundary</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#We-can-only-filter-on-integers-in-the-DSL,-so-we-will-round-up-the-values">We can only filter on integers in the DSL, so we will round up the values</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Step-4.-Now-get-the-number-of-publications-by-organisation,-filtered-by-category-that-have-a-field_citation_ratio-&gt;-the-boundary-score">Step 4. Now get the number of publications by organisation, filtered by category that have a field_citation_ratio &gt; the boundary score</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Step-5.-Rank-the-results">Step 5. Rank the results</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#We-should-probably-control-for-Volume-though…">We should probably control for Volume though…</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Step-6.-Get-the-total-paper-counts-for-each-organisation">Step 6. Get the total paper counts for each organisation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Step-7.-calculate-the-percentage-of-local-papers-in-the-top-1%-of-global-publications-(in-2018)">Step 7. calculate the percentage of local papers in the top 1% of global publications (in 2018)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Now-the-results-are-going-to-look-a-little-strange…">Now the results are going to look a little strange…</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Need-to-control-for-size…">Need to control for size…</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Final-step.-Show-me-the-institutions-that-I-should-be-most-interested-in-(Five-above)">Final step. Show me the institutions that I should be most interested in (Five above)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../10-misc/1-report-content-volumes-per-year.html">Generating a report that monitors research topics across Dimensions sources</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../10-misc/1-report-content-volumes-per-year.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10-misc/1-report-content-volumes-per-year.html#1.-Creating-a-query-builder">1. Creating a query builder</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../10-misc/1-report-content-volumes-per-year.html#Query-logic">Query logic</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../10-misc/1-report-content-volumes-per-year.html#2.-Plotting-the-results">2. Plotting the results</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10-misc/1-report-content-volumes-per-year.html#3.-Conclusions">3. Conclusions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../10-misc/2-enrich-text-with-for-codes.html">Enrich text with Field of Research (FoR) codes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../10-misc/2-enrich-text-with-for-codes.html#A-sample-set-of-publications">A sample set of publications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10-misc/2-enrich-text-with-for-codes.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10-misc/2-enrich-text-with-for-codes.html#1.-Loading-the-sample-text">1. Loading the sample text</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10-misc/2-enrich-text-with-for-codes.html#2.-FoR-Classification">2. FoR Classification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10-misc/2-enrich-text-with-for-codes.html#3.-Number-of-FoR-categories-per-document">3. Number of FoR categories per document</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10-misc/2-enrich-text-with-for-codes.html#4.-Top-FoR-categories-by-document-count">4. Top FoR categories by document count</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10-misc/2-enrich-text-with-for-codes.html#Conclusions">Conclusions</a></li>
</ul>
</li>
</ul>

            
          


   <div id="sidebar_github" style="margin-top: 12px;">
   <h3>Github Source</h3>

      <div style="margin: 10px 20px;">
      
         <iframe src="https://ghbtns.com/github-btn.html?user=digital-science&repo=dimensions-api-lab&type=star&count=true" frameborder="0" scrolling="0" width="170px" height="20px"></iframe>

         <iframe src="https://ghbtns.com/github-btn.html?user=digital-science&repo=dimensions-api-lab&type=fork&count=true" frameborder="0" scrolling="0" width="170px" height="20px"></iframe> 
      
      </div>

   </div>


        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">DSL</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    

    

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<script src='https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js'></script>
<script>require=requirejs;</script><a class="reference external image-reference" href="https://colab.research.google.com/github/digital-science/dimensions-api-lab/blob/master/cookbooks/8-organizations/7-benchmarking-organizations.ipynb"><img alt="../../_images/badge-colab.svg" src="../../_images/badge-colab.svg" /></a>
<a class="reference external image-reference" href="https://github.com/digital-science/dimensions-api-lab/blob/master/cookbooks/8-organizations/7-benchmarking-organizations.ipynb"><img alt="../../_images/badge-github-custom.svg" src="../../_images/badge-github-custom.svg" /></a>
<hr class="docutils" />
<div class="section" id="Benchmarking-organizations-with-the-Dimensions-API">
<h1>Benchmarking organizations with the Dimensions API<a class="headerlink" href="#Benchmarking-organizations-with-the-Dimensions-API" title="Permalink to this headline">¶</a></h1>
<p>This Python notebook shows how to use the <a class="reference external" href="https://www.dimensions.ai/dimensions-apis/">Dimensions Analytics API</a> in order to perform different benchmarking analyses of Organizations using publications data.</p>
<p>Outline</p>
<ol class="arabic simple">
<li><p>Quick yet effective benchmarking calculations via built-in API aggregate indicators</p></li>
<li><p>Building more complex quality benchmarking indicators</p></li>
</ol>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;==</span><span class="se">\n</span><span class="s2">CHANGELOG</span><span class="se">\n</span><span class="s2">This notebook was last run on </span><span class="si">%s</span><span class="se">\n</span><span class="s2">==&quot;</span> <span class="o">%</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%b </span><span class="si">%d</span><span class="s1">, %Y&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
==
CHANGELOG
This notebook was last run on Feb 21, 2022
==
</pre></div></div>
</div>
<div class="section" id="Prerequisites">
<h2>Prerequisites<a class="headerlink" href="#Prerequisites" title="Permalink to this headline">¶</a></h2>
<p>This notebook assumes you have installed the <a class="reference external" href="https://pypi.org/project/dimcli/">Dimcli</a> library and are familiar with the <a class="reference external" href="https://api-lab.dimensions.ai/cookbooks/1-getting-started/1-Using-the-Dimcli-library-to-query-the-API.html">‘Getting Started’ tutorial</a>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip install dimcli -U --quiet

<span class="kn">import</span> <span class="nn">dimcli</span>
<span class="kn">from</span> <span class="nn">dimcli.utils</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">time</span><span class="o">,</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;==</span><span class="se">\n</span><span class="s2">Logging in..&quot;</span><span class="p">)</span>
<span class="c1"># https://digital-science.github.io/dimcli/getting-started.html#authentication</span>
<span class="n">ENDPOINT</span> <span class="o">=</span> <span class="s2">&quot;https://app.dimensions.ai&quot;</span>
<span class="k">if</span> <span class="s1">&#39;google.colab&#39;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
  <span class="kn">import</span> <span class="nn">getpass</span>
  <span class="n">KEY</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="n">prompt</span><span class="o">=</span><span class="s1">&#39;API Key: &#39;</span><span class="p">)</span>
  <span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">KEY</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">ENDPOINT</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">KEY</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
  <span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">KEY</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">ENDPOINT</span><span class="p">)</span>
<span class="n">dsl</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">Dsl</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
Searching config file credentials for &#39;https://app.dimensions.ai&#39; endpoint..
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
==
Logging in..
Dimcli - Dimensions API Client (v0.9.6)
Connected to: &lt;https://app.dimensions.ai/api/dsl&gt; - DSL v2.0
Method: dsl.ini file
</pre></div></div>
</div>
</div>
<div class="section" id="1.-Quick-benchmarking-using-the-API">
<h2>1. Quick benchmarking using the API<a class="headerlink" href="#1.-Quick-benchmarking-using-the-API" title="Permalink to this headline">¶</a></h2>
<p>Benchmarking by volume is reasonably straight forward if what you want to compare is volume, or one of the available aggregate indicators in the Dimensions API (see <a class="reference external" href="https://docs.dimensions.ai/dsl/examples.html#indicators-aggregations">https://docs.dimensions.ai/dsl/examples.html#indicators-aggregations</a>).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">dsldf</span>
search publications
return research_orgs[name] aggregate altmetric_median
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Returned Research_orgs: 20
Time: 21.14s
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>altmetric_median</th>
      <th>count</th>
      <th>id</th>
      <th>name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>5.0</td>
      <td>546592</td>
      <td>grid.38142.3c</td>
      <td>Harvard University</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3.0</td>
      <td>484017</td>
      <td>grid.26999.3d</td>
      <td>University of Tokyo</td>
    </tr>
    <tr>
      <th>2</th>
      <td>4.0</td>
      <td>342764</td>
      <td>grid.17063.33</td>
      <td>University of Toronto</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3.0</td>
      <td>320966</td>
      <td>grid.214458.e</td>
      <td>University of Michigan</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3.0</td>
      <td>310485</td>
      <td>grid.258799.8</td>
      <td>Kyoto University</td>
    </tr>
    <tr>
      <th>5</th>
      <td>4.0</td>
      <td>302094</td>
      <td>grid.168010.e</td>
      <td>Stanford University</td>
    </tr>
    <tr>
      <th>6</th>
      <td>4.0</td>
      <td>297558</td>
      <td>grid.34477.33</td>
      <td>University of Washington</td>
    </tr>
    <tr>
      <th>7</th>
      <td>3.0</td>
      <td>297094</td>
      <td>grid.19006.3e</td>
      <td>University of California, Los Angeles</td>
    </tr>
    <tr>
      <th>8</th>
      <td>5.0</td>
      <td>289280</td>
      <td>grid.4991.5</td>
      <td>University of Oxford</td>
    </tr>
    <tr>
      <th>9</th>
      <td>4.0</td>
      <td>285143</td>
      <td>grid.21107.35</td>
      <td>Johns Hopkins University</td>
    </tr>
    <tr>
      <th>10</th>
      <td>4.0</td>
      <td>282170</td>
      <td>grid.5335.0</td>
      <td>University of Cambridge</td>
    </tr>
    <tr>
      <th>11</th>
      <td>2.0</td>
      <td>280405</td>
      <td>grid.11899.38</td>
      <td>University of São Paulo</td>
    </tr>
    <tr>
      <th>12</th>
      <td>4.0</td>
      <td>271170</td>
      <td>grid.25879.31</td>
      <td>University of Pennsylvania</td>
    </tr>
    <tr>
      <th>13</th>
      <td>4.0</td>
      <td>266337</td>
      <td>grid.83440.3b</td>
      <td>University College London</td>
    </tr>
    <tr>
      <th>14</th>
      <td>3.0</td>
      <td>265592</td>
      <td>grid.136593.b</td>
      <td>Osaka University</td>
    </tr>
    <tr>
      <th>15</th>
      <td>3.0</td>
      <td>250749</td>
      <td>grid.69566.3a</td>
      <td>Tohoku University</td>
    </tr>
    <tr>
      <th>16</th>
      <td>3.0</td>
      <td>244713</td>
      <td>grid.5386.8</td>
      <td>Cornell University</td>
    </tr>
    <tr>
      <th>17</th>
      <td>4.0</td>
      <td>242749</td>
      <td>grid.47840.3f</td>
      <td>University of California, Berkeley</td>
    </tr>
    <tr>
      <th>18</th>
      <td>3.0</td>
      <td>239283</td>
      <td>grid.17635.36</td>
      <td>University of Minnesota</td>
    </tr>
    <tr>
      <th>19</th>
      <td>4.0</td>
      <td>236142</td>
      <td>grid.21729.3f</td>
      <td>Columbia University</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">dsldf</span>
search publications
return research_orgs[name] aggregate citations_total
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Returned Research_orgs: 20
Time: 6.63s
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>citations_total</th>
      <th>count</th>
      <th>id</th>
      <th>name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>28836616.0</td>
      <td>546592</td>
      <td>grid.38142.3c</td>
      <td>Harvard University</td>
    </tr>
    <tr>
      <th>1</th>
      <td>8545148.0</td>
      <td>484017</td>
      <td>grid.26999.3d</td>
      <td>University of Tokyo</td>
    </tr>
    <tr>
      <th>2</th>
      <td>11040840.0</td>
      <td>342764</td>
      <td>grid.17063.33</td>
      <td>University of Toronto</td>
    </tr>
    <tr>
      <th>3</th>
      <td>11710248.0</td>
      <td>320966</td>
      <td>grid.214458.e</td>
      <td>University of Michigan</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5928948.0</td>
      <td>310485</td>
      <td>grid.258799.8</td>
      <td>Kyoto University</td>
    </tr>
    <tr>
      <th>5</th>
      <td>14738599.0</td>
      <td>302094</td>
      <td>grid.168010.e</td>
      <td>Stanford University</td>
    </tr>
    <tr>
      <th>6</th>
      <td>12585381.0</td>
      <td>297558</td>
      <td>grid.34477.33</td>
      <td>University of Washington</td>
    </tr>
    <tr>
      <th>7</th>
      <td>11710928.0</td>
      <td>297094</td>
      <td>grid.19006.3e</td>
      <td>University of California, Los Angeles</td>
    </tr>
    <tr>
      <th>8</th>
      <td>10879614.0</td>
      <td>289280</td>
      <td>grid.4991.5</td>
      <td>University of Oxford</td>
    </tr>
    <tr>
      <th>9</th>
      <td>12084053.0</td>
      <td>285143</td>
      <td>grid.21107.35</td>
      <td>Johns Hopkins University</td>
    </tr>
    <tr>
      <th>10</th>
      <td>10814051.0</td>
      <td>282170</td>
      <td>grid.5335.0</td>
      <td>University of Cambridge</td>
    </tr>
    <tr>
      <th>11</th>
      <td>4105653.0</td>
      <td>280405</td>
      <td>grid.11899.38</td>
      <td>University of São Paulo</td>
    </tr>
    <tr>
      <th>12</th>
      <td>10450691.0</td>
      <td>271170</td>
      <td>grid.25879.31</td>
      <td>University of Pennsylvania</td>
    </tr>
    <tr>
      <th>13</th>
      <td>9614297.0</td>
      <td>266337</td>
      <td>grid.83440.3b</td>
      <td>University College London</td>
    </tr>
    <tr>
      <th>14</th>
      <td>4653874.0</td>
      <td>265592</td>
      <td>grid.136593.b</td>
      <td>Osaka University</td>
    </tr>
    <tr>
      <th>15</th>
      <td>3694359.0</td>
      <td>250749</td>
      <td>grid.69566.3a</td>
      <td>Tohoku University</td>
    </tr>
    <tr>
      <th>16</th>
      <td>9370701.0</td>
      <td>244713</td>
      <td>grid.5386.8</td>
      <td>Cornell University</td>
    </tr>
    <tr>
      <th>17</th>
      <td>11806056.0</td>
      <td>242749</td>
      <td>grid.47840.3f</td>
      <td>University of California, Berkeley</td>
    </tr>
    <tr>
      <th>18</th>
      <td>8360048.0</td>
      <td>239283</td>
      <td>grid.17635.36</td>
      <td>University of Minnesota</td>
    </tr>
    <tr>
      <th>19</th>
      <td>9400497.0</td>
      <td>236142</td>
      <td>grid.21729.3f</td>
      <td>Columbia University</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">dsldf</span>
search publications
return research_orgs[name] aggregate recent_citations_total
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Returned Research_orgs: 20
Time: 6.54s
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>id</th>
      <th>name</th>
      <th>recent_citations_total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>546592</td>
      <td>grid.38142.3c</td>
      <td>Harvard University</td>
      <td>5562378.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>484017</td>
      <td>grid.26999.3d</td>
      <td>University of Tokyo</td>
      <td>1471000.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>342764</td>
      <td>grid.17063.33</td>
      <td>University of Toronto</td>
      <td>2380994.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>320966</td>
      <td>grid.214458.e</td>
      <td>University of Michigan</td>
      <td>2370219.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>310485</td>
      <td>grid.258799.8</td>
      <td>Kyoto University</td>
      <td>1006685.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>302094</td>
      <td>grid.168010.e</td>
      <td>Stanford University</td>
      <td>2985116.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>297558</td>
      <td>grid.34477.33</td>
      <td>University of Washington</td>
      <td>2411827.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>297094</td>
      <td>grid.19006.3e</td>
      <td>University of California, Los Angeles</td>
      <td>2137101.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>289280</td>
      <td>grid.4991.5</td>
      <td>University of Oxford</td>
      <td>2504619.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>285143</td>
      <td>grid.21107.35</td>
      <td>Johns Hopkins University</td>
      <td>2352686.0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>282170</td>
      <td>grid.5335.0</td>
      <td>University of Cambridge</td>
      <td>2110364.0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>280405</td>
      <td>grid.11899.38</td>
      <td>University of São Paulo</td>
      <td>1124894.0</td>
    </tr>
    <tr>
      <th>12</th>
      <td>271170</td>
      <td>grid.25879.31</td>
      <td>University of Pennsylvania</td>
      <td>2049126.0</td>
    </tr>
    <tr>
      <th>13</th>
      <td>266337</td>
      <td>grid.83440.3b</td>
      <td>University College London</td>
      <td>2197569.0</td>
    </tr>
    <tr>
      <th>14</th>
      <td>265592</td>
      <td>grid.136593.b</td>
      <td>Osaka University</td>
      <td>727151.0</td>
    </tr>
    <tr>
      <th>15</th>
      <td>250749</td>
      <td>grid.69566.3a</td>
      <td>Tohoku University</td>
      <td>644246.0</td>
    </tr>
    <tr>
      <th>16</th>
      <td>244713</td>
      <td>grid.5386.8</td>
      <td>Cornell University</td>
      <td>1809884.0</td>
    </tr>
    <tr>
      <th>17</th>
      <td>242749</td>
      <td>grid.47840.3f</td>
      <td>University of California, Berkeley</td>
      <td>2057506.0</td>
    </tr>
    <tr>
      <th>18</th>
      <td>239283</td>
      <td>grid.17635.36</td>
      <td>University of Minnesota</td>
      <td>1519539.0</td>
    </tr>
    <tr>
      <th>19</th>
      <td>236142</td>
      <td>grid.21729.3f</td>
      <td>Columbia University</td>
      <td>1754780.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Aside: Recent Citations</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">dsldf</span>
search publications
return year aggregate recent_citations_total
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Returned Year: 20
Time: 4.06s
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>id</th>
      <th>recent_citations_total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>6503486</td>
      <td>2020</td>
      <td>18375337.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>6391947</td>
      <td>2021</td>
      <td>4632716.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>5792555</td>
      <td>2019</td>
      <td>22470145.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>5369555</td>
      <td>2018</td>
      <td>23030935.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5044596</td>
      <td>2017</td>
      <td>21362603.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>4598245</td>
      <td>2016</td>
      <td>19046830.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>4395107</td>
      <td>2015</td>
      <td>17010283.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>4244049</td>
      <td>2014</td>
      <td>15057104.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>4046162</td>
      <td>2013</td>
      <td>13475978.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>3762532</td>
      <td>2012</td>
      <td>11970228.0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>3667073</td>
      <td>2011</td>
      <td>10958039.0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>3430544</td>
      <td>2010</td>
      <td>9915351.0</td>
    </tr>
    <tr>
      <th>12</th>
      <td>3144460</td>
      <td>2009</td>
      <td>8991871.0</td>
    </tr>
    <tr>
      <th>13</th>
      <td>2937393</td>
      <td>2008</td>
      <td>7853718.0</td>
    </tr>
    <tr>
      <th>14</th>
      <td>2915691</td>
      <td>2007</td>
      <td>7198101.0</td>
    </tr>
    <tr>
      <th>15</th>
      <td>2610760</td>
      <td>2006</td>
      <td>6579372.0</td>
    </tr>
    <tr>
      <th>16</th>
      <td>2410569</td>
      <td>2005</td>
      <td>5985630.0</td>
    </tr>
    <tr>
      <th>17</th>
      <td>2246194</td>
      <td>2004</td>
      <td>5335870.0</td>
    </tr>
    <tr>
      <th>18</th>
      <td>2037978</td>
      <td>2003</td>
      <td>4730168.0</td>
    </tr>
    <tr>
      <th>19</th>
      <td>1892417</td>
      <td>2002</td>
      <td>4234096.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dsl_last_results</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;recent_citations_total&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;AxesSubplot:xlabel=&#39;id&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/cookbooks_8-organizations_7-benchmarking-organizations_11_1.png" src="../../_images/cookbooks_8-organizations_7-benchmarking-organizations_11_1.png" />
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">recent_citations</span> <span class="o">=</span> <span class="n">dsl_last_results</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">recent_citations</span><span class="p">[</span><span class="s1">&#39;recent_ratio&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">recent_citations</span><span class="p">[</span><span class="s1">&#39;recent_citations_total&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">recent_citations</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span>
<span class="n">recent_citations</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">recent_citations</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">recent_citations</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">)</span><span class="o">.</span>\
    <span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;recent_ratio&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;AxesSubplot:xlabel=&#39;year&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/cookbooks_8-organizations_7-benchmarking-organizations_14_1.png" src="../../_images/cookbooks_8-organizations_7-benchmarking-organizations_14_1.png" />
</div>
</div>
<p>End Aside:</p>
</div>
<div class="section" id="2.-Calculating-more-complex-‘Quality’-Benchmarking-indicators:-Number-of-articles-in-the-top-X-percent-of-research-their-category">
<h2>2. Calculating more complex ‘Quality’ Benchmarking indicators: Number of articles in the top X percent of research their category<a class="headerlink" href="#2.-Calculating-more-complex-‘Quality’-Benchmarking-indicators:-Number-of-articles-in-the-top-X-percent-of-research-their-category" title="Permalink to this headline">¶</a></h2>
<div class="section" id="Step-1.-retrieve-the-total-volume-of-publications-by-volume.-(focusing-on-Fields-of-Research)">
<h3>Step 1. retrieve the total volume of publications by volume. (focusing on Fields of Research)<a class="headerlink" href="#Step-1.-retrieve-the-total-volume-of-publications-by-volume.-(focusing-on-Fields-of-Research)" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">dsldf</span>

search publications
where year=2018
return category_for limit 1000
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Returned Category_for: 176
Time: 1.02s
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>id</th>
      <th>name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1168442</td>
      <td>2211</td>
      <td>11 Medical and Health Sciences</td>
    </tr>
    <tr>
      <th>1</th>
      <td>610238</td>
      <td>2209</td>
      <td>09 Engineering</td>
    </tr>
    <tr>
      <th>2</th>
      <td>447354</td>
      <td>3053</td>
      <td>1103 Clinical Sciences</td>
    </tr>
    <tr>
      <th>3</th>
      <td>335403</td>
      <td>2206</td>
      <td>06 Biological Sciences</td>
    </tr>
    <tr>
      <th>4</th>
      <td>332128</td>
      <td>2208</td>
      <td>08 Information and Computing Sciences</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>171</th>
      <td>187</td>
      <td>3528</td>
      <td>1899 Other Law and Legal Studies</td>
    </tr>
    <tr>
      <th>172</th>
      <td>144</td>
      <td>3491</td>
      <td>1799 Other Psychology and Cognitive Sciences</td>
    </tr>
    <tr>
      <th>173</th>
      <td>72</td>
      <td>3567</td>
      <td>1999 Other Studies In Creative Arts and Writing</td>
    </tr>
    <tr>
      <th>174</th>
      <td>62</td>
      <td>3240</td>
      <td>1299 Other Built Environment and Design</td>
    </tr>
    <tr>
      <th>175</th>
      <td>21</td>
      <td>3223</td>
      <td>1204 Engineering Design</td>
    </tr>
  </tbody>
</table>
<p>176 rows × 3 columns</p>
</div></div>
</div>
<div class="section" id="Step-1.2.-…-Need-to-filter-for-level-2-codes">
<h4>Step 1.2. … Need to filter for level 2 codes<a class="headerlink" href="#Step-1.2.-…-Need-to-filter-for-level-2-codes" title="Permalink to this headline">¶</a></h4>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">      search publications</span>
<span class="s2">      where year=2018</span>
<span class="s2">      return category_for limit 1000</span>

<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">as_dataframe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Returned Category_for: 176
Time: 0.84s
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;level&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">result</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>id</th>
      <th>name</th>
      <th>level</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1168442</td>
      <td>2211</td>
      <td>11 Medical and Health Sciences</td>
      <td>2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>610238</td>
      <td>2209</td>
      <td>09 Engineering</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>447354</td>
      <td>3053</td>
      <td>1103 Clinical Sciences</td>
      <td>4</td>
    </tr>
    <tr>
      <th>3</th>
      <td>335403</td>
      <td>2206</td>
      <td>06 Biological Sciences</td>
      <td>2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>332128</td>
      <td>2208</td>
      <td>08 Information and Computing Sciences</td>
      <td>2</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>171</th>
      <td>187</td>
      <td>3528</td>
      <td>1899 Other Law and Legal Studies</td>
      <td>4</td>
    </tr>
    <tr>
      <th>172</th>
      <td>144</td>
      <td>3491</td>
      <td>1799 Other Psychology and Cognitive Sciences</td>
      <td>4</td>
    </tr>
    <tr>
      <th>173</th>
      <td>72</td>
      <td>3567</td>
      <td>1999 Other Studies In Creative Arts and Writing</td>
      <td>4</td>
    </tr>
    <tr>
      <th>174</th>
      <td>62</td>
      <td>3240</td>
      <td>1299 Other Built Environment and Design</td>
      <td>4</td>
    </tr>
    <tr>
      <th>175</th>
      <td>21</td>
      <td>3223</td>
      <td>1204 Engineering Design</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
<p>176 rows × 4 columns</p>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="p">[</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;level&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>id</th>
      <th>name</th>
      <th>level</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1168442</td>
      <td>2211</td>
      <td>11 Medical and Health Sciences</td>
      <td>2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>610238</td>
      <td>2209</td>
      <td>09 Engineering</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>335403</td>
      <td>2206</td>
      <td>06 Biological Sciences</td>
      <td>2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>332128</td>
      <td>2208</td>
      <td>08 Information and Computing Sciences</td>
      <td>2</td>
    </tr>
    <tr>
      <th>5</th>
      <td>304680</td>
      <td>2203</td>
      <td>03 Chemical Sciences</td>
      <td>2</td>
    </tr>
    <tr>
      <th>7</th>
      <td>224973</td>
      <td>2202</td>
      <td>02 Physical Sciences</td>
      <td>2</td>
    </tr>
    <tr>
      <th>8</th>
      <td>201573</td>
      <td>2201</td>
      <td>01 Mathematical Sciences</td>
      <td>2</td>
    </tr>
    <tr>
      <th>12</th>
      <td>161476</td>
      <td>2217</td>
      <td>17 Psychology and Cognitive Sciences</td>
      <td>2</td>
    </tr>
    <tr>
      <th>13</th>
      <td>151455</td>
      <td>2216</td>
      <td>16 Studies in Human Society</td>
      <td>2</td>
    </tr>
    <tr>
      <th>18</th>
      <td>98630</td>
      <td>2215</td>
      <td>15 Commerce, Management, Tourism and Services</td>
      <td>2</td>
    </tr>
    <tr>
      <th>20</th>
      <td>95061</td>
      <td>2210</td>
      <td>10 Technology</td>
      <td>2</td>
    </tr>
    <tr>
      <th>21</th>
      <td>94318</td>
      <td>2220</td>
      <td>20 Language, Communication and Culture</td>
      <td>2</td>
    </tr>
    <tr>
      <th>24</th>
      <td>88929</td>
      <td>2213</td>
      <td>13 Education</td>
      <td>2</td>
    </tr>
    <tr>
      <th>25</th>
      <td>86868</td>
      <td>2204</td>
      <td>04 Earth Sciences</td>
      <td>2</td>
    </tr>
    <tr>
      <th>26</th>
      <td>85471</td>
      <td>2214</td>
      <td>14 Economics</td>
      <td>2</td>
    </tr>
    <tr>
      <th>27</th>
      <td>80461</td>
      <td>2221</td>
      <td>21 History and Archaeology</td>
      <td>2</td>
    </tr>
    <tr>
      <th>32</th>
      <td>71522</td>
      <td>2205</td>
      <td>05 Environmental Sciences</td>
      <td>2</td>
    </tr>
    <tr>
      <th>35</th>
      <td>67805</td>
      <td>2207</td>
      <td>07 Agricultural and Veterinary Sciences</td>
      <td>2</td>
    </tr>
    <tr>
      <th>41</th>
      <td>56606</td>
      <td>2222</td>
      <td>22 Philosophy and Religious Studies</td>
      <td>2</td>
    </tr>
    <tr>
      <th>48</th>
      <td>43353</td>
      <td>2218</td>
      <td>18 Law and Legal Studies</td>
      <td>2</td>
    </tr>
    <tr>
      <th>74</th>
      <td>26972</td>
      <td>2212</td>
      <td>12 Built Environment and Design</td>
      <td>2</td>
    </tr>
    <tr>
      <th>84</th>
      <td>20301</td>
      <td>2219</td>
      <td>19 Studies in Creative Arts and Writing</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
</div>
<div class="section" id="Step-2.-calculate-1%-of-the-total-number-of-records-by-category.-This-will-be-used-to-retrieve-the-1%-boundary-record..">
<h3>Step 2. calculate 1% of the total number of records by category. This will be used to retrieve the 1% boundary record..<a class="headerlink" href="#Step-2.-calculate-1%-of-the-total-number-of-records-by-category.-This-will-be-used-to-retrieve-the-1%-boundary-record.." title="Permalink to this headline">¶</a></h3>
<p>What is the boundary record?</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;cutoff&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mf">.01</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="p">[</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;level&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>id</th>
      <th>name</th>
      <th>level</th>
      <th>cutoff</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1168442</td>
      <td>2211</td>
      <td>11 Medical and Health Sciences</td>
      <td>2</td>
      <td>11684</td>
    </tr>
    <tr>
      <th>1</th>
      <td>610238</td>
      <td>2209</td>
      <td>09 Engineering</td>
      <td>2</td>
      <td>6102</td>
    </tr>
    <tr>
      <th>3</th>
      <td>335403</td>
      <td>2206</td>
      <td>06 Biological Sciences</td>
      <td>2</td>
      <td>3354</td>
    </tr>
    <tr>
      <th>4</th>
      <td>332128</td>
      <td>2208</td>
      <td>08 Information and Computing Sciences</td>
      <td>2</td>
      <td>3321</td>
    </tr>
    <tr>
      <th>5</th>
      <td>304680</td>
      <td>2203</td>
      <td>03 Chemical Sciences</td>
      <td>2</td>
      <td>3046</td>
    </tr>
    <tr>
      <th>7</th>
      <td>224973</td>
      <td>2202</td>
      <td>02 Physical Sciences</td>
      <td>2</td>
      <td>2249</td>
    </tr>
    <tr>
      <th>8</th>
      <td>201573</td>
      <td>2201</td>
      <td>01 Mathematical Sciences</td>
      <td>2</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>12</th>
      <td>161476</td>
      <td>2217</td>
      <td>17 Psychology and Cognitive Sciences</td>
      <td>2</td>
      <td>1614</td>
    </tr>
    <tr>
      <th>13</th>
      <td>151455</td>
      <td>2216</td>
      <td>16 Studies in Human Society</td>
      <td>2</td>
      <td>1514</td>
    </tr>
    <tr>
      <th>18</th>
      <td>98630</td>
      <td>2215</td>
      <td>15 Commerce, Management, Tourism and Services</td>
      <td>2</td>
      <td>986</td>
    </tr>
    <tr>
      <th>20</th>
      <td>95061</td>
      <td>2210</td>
      <td>10 Technology</td>
      <td>2</td>
      <td>950</td>
    </tr>
    <tr>
      <th>21</th>
      <td>94318</td>
      <td>2220</td>
      <td>20 Language, Communication and Culture</td>
      <td>2</td>
      <td>943</td>
    </tr>
    <tr>
      <th>24</th>
      <td>88929</td>
      <td>2213</td>
      <td>13 Education</td>
      <td>2</td>
      <td>889</td>
    </tr>
    <tr>
      <th>25</th>
      <td>86868</td>
      <td>2204</td>
      <td>04 Earth Sciences</td>
      <td>2</td>
      <td>868</td>
    </tr>
    <tr>
      <th>26</th>
      <td>85471</td>
      <td>2214</td>
      <td>14 Economics</td>
      <td>2</td>
      <td>854</td>
    </tr>
    <tr>
      <th>27</th>
      <td>80461</td>
      <td>2221</td>
      <td>21 History and Archaeology</td>
      <td>2</td>
      <td>804</td>
    </tr>
    <tr>
      <th>32</th>
      <td>71522</td>
      <td>2205</td>
      <td>05 Environmental Sciences</td>
      <td>2</td>
      <td>715</td>
    </tr>
    <tr>
      <th>35</th>
      <td>67805</td>
      <td>2207</td>
      <td>07 Agricultural and Veterinary Sciences</td>
      <td>2</td>
      <td>678</td>
    </tr>
    <tr>
      <th>41</th>
      <td>56606</td>
      <td>2222</td>
      <td>22 Philosophy and Religious Studies</td>
      <td>2</td>
      <td>566</td>
    </tr>
    <tr>
      <th>48</th>
      <td>43353</td>
      <td>2218</td>
      <td>18 Law and Legal Studies</td>
      <td>2</td>
      <td>433</td>
    </tr>
    <tr>
      <th>74</th>
      <td>26972</td>
      <td>2212</td>
      <td>12 Built Environment and Design</td>
      <td>2</td>
      <td>269</td>
    </tr>
    <tr>
      <th>84</th>
      <td>20301</td>
      <td>2219</td>
      <td>19 Studies in Creative Arts and Writing</td>
      <td>2</td>
      <td>203</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
<div class="section" id="Step-3.-Use-the-cutoff-value-to-get-the-indicator-value-for-the-1%-boundary">
<h3>Step 3. Use the cutoff value to get the indicator value for the 1% boundary<a class="headerlink" href="#Step-3.-Use-the-cutoff-value-to-get-the-indicator-value-for-the-1%-boundary" title="Permalink to this headline">¶</a></h3>
<p>Note: Here we use:</p>
<p>‘sort by’ , limit, and skip!</p>
<ul class="simple">
<li><p>‘sort by’: return results in order of field_citation_ratio</p></li>
<li><p>‘limit’: we are only interested in the first result returned</p></li>
<li><p>‘skip’ we are ‘skipping’ to the boundary record</p></li>
</ul>
<p>Double Note: this strategy won’t work when the boundary record is &gt; 50,000…</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfl</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">result</span><span class="p">[</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;level&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>

<span class="s2">           search publications</span>
<span class="s2">           where category_for.id = &quot;</span><span class="si">{</span><span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">           and year = 2018</span>
<span class="s2">           return publications[field_citation_ratio]</span>
<span class="s2">               sort by field_citation_ratio</span>
<span class="s2">               limit 1</span>
<span class="s2">               skip </span><span class="si">{</span><span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;cutoff&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"></span>

<span class="s2">      &quot;&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">as_dataframe</span><span class="p">()</span>

    <span class="n">result</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
    <span class="n">result</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
    <span class="n">dfl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Returned Publications: 1 (total = 1168442)
Time: 9.13s
Returned Publications: 1 (total = 610238)
Time: 4.71s
Returned Publications: 1 (total = 335403)
Time: 2.55s
Returned Publications: 1 (total = 332128)
Time: 2.55s
Returned Publications: 1 (total = 304680)
Time: 2.17s
Returned Publications: 1 (total = 224973)
Time: 2.28s
Returned Publications: 1 (total = 201573)
Time: 2.07s
Returned Publications: 1 (total = 161476)
Time: 1.58s
Returned Publications: 1 (total = 151455)
Time: 1.67s
Returned Publications: 1 (total = 98630)
Time: 1.27s
Returned Publications: 1 (total = 95061)
Time: 0.91s
Returned Publications: 1 (total = 94318)
Time: 1.18s
Returned Publications: 1 (total = 88929)
Time: 1.07s
Returned Publications: 1 (total = 86868)
Time: 1.03s
Returned Publications: 1 (total = 85471)
Time: 1.12s
Returned Publications: 1 (total = 80461)
Time: 1.27s
Returned Publications: 1 (total = 71522)
Time: 0.92s
Returned Publications: 1 (total = 67805)
Time: 1.14s
Returned Publications: 1 (total = 56606)
Time: 1.06s
Returned Publications: 1 (total = 43353)
Time: 0.86s
Returned Publications: 1 (total = 26972)
Time: 0.75s
Returned Publications: 1 (total = 20301)
Time: 0.82s
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cutoffs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">dfl</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cutoffs</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>field_citation_ratio</th>
      <th>name</th>
      <th>id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>28.41</td>
      <td>11 Medical and Health Sciences</td>
      <td>2211</td>
    </tr>
    <tr>
      <th>0</th>
      <td>21.35</td>
      <td>09 Engineering</td>
      <td>2209</td>
    </tr>
    <tr>
      <th>0</th>
      <td>20.52</td>
      <td>06 Biological Sciences</td>
      <td>2206</td>
    </tr>
    <tr>
      <th>0</th>
      <td>35.44</td>
      <td>08 Information and Computing Sciences</td>
      <td>2208</td>
    </tr>
    <tr>
      <th>0</th>
      <td>20.51</td>
      <td>03 Chemical Sciences</td>
      <td>2203</td>
    </tr>
    <tr>
      <th>0</th>
      <td>24.72</td>
      <td>02 Physical Sciences</td>
      <td>2202</td>
    </tr>
    <tr>
      <th>0</th>
      <td>27.12</td>
      <td>01 Mathematical Sciences</td>
      <td>2201</td>
    </tr>
    <tr>
      <th>0</th>
      <td>24.56</td>
      <td>17 Psychology and Cognitive Sciences</td>
      <td>2217</td>
    </tr>
    <tr>
      <th>0</th>
      <td>27.91</td>
      <td>16 Studies in Human Society</td>
      <td>2216</td>
    </tr>
    <tr>
      <th>0</th>
      <td>32.01</td>
      <td>15 Commerce, Management, Tourism and Services</td>
      <td>2215</td>
    </tr>
    <tr>
      <th>0</th>
      <td>25.02</td>
      <td>10 Technology</td>
      <td>2210</td>
    </tr>
    <tr>
      <th>0</th>
      <td>30.45</td>
      <td>20 Language, Communication and Culture</td>
      <td>2220</td>
    </tr>
    <tr>
      <th>0</th>
      <td>25.34</td>
      <td>13 Education</td>
      <td>2213</td>
    </tr>
    <tr>
      <th>0</th>
      <td>16.52</td>
      <td>04 Earth Sciences</td>
      <td>2204</td>
    </tr>
    <tr>
      <th>0</th>
      <td>33.18</td>
      <td>14 Economics</td>
      <td>2214</td>
    </tr>
    <tr>
      <th>0</th>
      <td>28.80</td>
      <td>21 History and Archaeology</td>
      <td>2221</td>
    </tr>
    <tr>
      <th>0</th>
      <td>20.46</td>
      <td>05 Environmental Sciences</td>
      <td>2205</td>
    </tr>
    <tr>
      <th>0</th>
      <td>15.42</td>
      <td>07 Agricultural and Veterinary Sciences</td>
      <td>2207</td>
    </tr>
    <tr>
      <th>0</th>
      <td>27.68</td>
      <td>22 Philosophy and Religious Studies</td>
      <td>2222</td>
    </tr>
    <tr>
      <th>0</th>
      <td>27.52</td>
      <td>18 Law and Legal Studies</td>
      <td>2218</td>
    </tr>
    <tr>
      <th>0</th>
      <td>16.68</td>
      <td>12 Built Environment and Design</td>
      <td>2212</td>
    </tr>
    <tr>
      <th>0</th>
      <td>27.55</td>
      <td>19 Studies in Creative Arts and Writing</td>
      <td>2219</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="section" id="We-can-only-filter-on-integers-in-the-DSL,-so-we-will-round-up-the-values">
<h4>We can only filter on integers in the DSL, so we will round up the values<a class="headerlink" href="#We-can-only-filter-on-integers-in-the-DSL,-so-we-will-round-up-the-values" title="Permalink to this headline">¶</a></h4>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cutoffs</span><span class="o">.</span><span class="n">field_citation_ratio</span> <span class="o">=</span>  <span class="n">cutoffs</span><span class="o">.</span><span class="n">field_citation_ratio</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cutoffs</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>field_citation_ratio</th>
      <th>name</th>
      <th>id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>28</td>
      <td>11 Medical and Health Sciences</td>
      <td>2211</td>
    </tr>
    <tr>
      <th>0</th>
      <td>21</td>
      <td>09 Engineering</td>
      <td>2209</td>
    </tr>
    <tr>
      <th>0</th>
      <td>20</td>
      <td>06 Biological Sciences</td>
      <td>2206</td>
    </tr>
    <tr>
      <th>0</th>
      <td>35</td>
      <td>08 Information and Computing Sciences</td>
      <td>2208</td>
    </tr>
    <tr>
      <th>0</th>
      <td>20</td>
      <td>03 Chemical Sciences</td>
      <td>2203</td>
    </tr>
    <tr>
      <th>0</th>
      <td>24</td>
      <td>02 Physical Sciences</td>
      <td>2202</td>
    </tr>
    <tr>
      <th>0</th>
      <td>27</td>
      <td>01 Mathematical Sciences</td>
      <td>2201</td>
    </tr>
    <tr>
      <th>0</th>
      <td>24</td>
      <td>17 Psychology and Cognitive Sciences</td>
      <td>2217</td>
    </tr>
    <tr>
      <th>0</th>
      <td>27</td>
      <td>16 Studies in Human Society</td>
      <td>2216</td>
    </tr>
    <tr>
      <th>0</th>
      <td>32</td>
      <td>15 Commerce, Management, Tourism and Services</td>
      <td>2215</td>
    </tr>
    <tr>
      <th>0</th>
      <td>25</td>
      <td>10 Technology</td>
      <td>2210</td>
    </tr>
    <tr>
      <th>0</th>
      <td>30</td>
      <td>20 Language, Communication and Culture</td>
      <td>2220</td>
    </tr>
    <tr>
      <th>0</th>
      <td>25</td>
      <td>13 Education</td>
      <td>2213</td>
    </tr>
    <tr>
      <th>0</th>
      <td>16</td>
      <td>04 Earth Sciences</td>
      <td>2204</td>
    </tr>
    <tr>
      <th>0</th>
      <td>33</td>
      <td>14 Economics</td>
      <td>2214</td>
    </tr>
    <tr>
      <th>0</th>
      <td>28</td>
      <td>21 History and Archaeology</td>
      <td>2221</td>
    </tr>
    <tr>
      <th>0</th>
      <td>20</td>
      <td>05 Environmental Sciences</td>
      <td>2205</td>
    </tr>
    <tr>
      <th>0</th>
      <td>15</td>
      <td>07 Agricultural and Veterinary Sciences</td>
      <td>2207</td>
    </tr>
    <tr>
      <th>0</th>
      <td>27</td>
      <td>22 Philosophy and Religious Studies</td>
      <td>2222</td>
    </tr>
    <tr>
      <th>0</th>
      <td>27</td>
      <td>18 Law and Legal Studies</td>
      <td>2218</td>
    </tr>
    <tr>
      <th>0</th>
      <td>16</td>
      <td>12 Built Environment and Design</td>
      <td>2212</td>
    </tr>
    <tr>
      <th>0</th>
      <td>27</td>
      <td>19 Studies in Creative Arts and Writing</td>
      <td>2219</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
</div>
<div class="section" id="Step-4.-Now-get-the-number-of-publications-by-organisation,-filtered-by-category-that-have-a-field_citation_ratio-&gt;-the-boundary-score">
<h3>Step 4. Now get the number of publications by organisation, filtered by category that have a field_citation_ratio &gt; the boundary score<a class="headerlink" href="#Step-4.-Now-get-the-number-of-publications-by-organisation,-filtered-by-category-that-have-a-field_citation_ratio->-the-boundary-score" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfl</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">cutoffs</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>

  <span class="n">result</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>

<span class="s2">     search publications</span>
<span class="s2">     where</span>
<span class="s2">         year=2018</span>
<span class="s2">         and category_for.id = &quot;</span><span class="si">{</span><span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">         and field_citation_ratio &gt;= </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;field_citation_ratio&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2"></span>
<span class="s2">    return research_orgs limit 1000</span>

<span class="s2">  &quot;&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">as_dataframe</span><span class="p">()</span>

  <span class="n">result</span><span class="p">[</span><span class="s1">&#39;for_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
  <span class="n">result</span><span class="p">[</span><span class="s1">&#39;for_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
  <span class="n">dfl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<br/><br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Returned Research_orgs: 1000
Time: 1.21s
Returned Research_orgs: 1000
Time: 1.09s
Returned Research_orgs: 1000
Time: 3.14s
Returned Research_orgs: 1000
Time: 1.30s
Returned Research_orgs: 1000
Time: 0.96s
Returned Research_orgs: 1000
Time: 1.13s
Returned Research_orgs: 1000
Time: 1.06s
Returned Research_orgs: 1000
Time: 1.16s
Returned Research_orgs: 1000
Time: 1.06s
Returned Research_orgs: 927
Time: 1.13s
Returned Research_orgs: 915
Time: 1.04s
Returned Research_orgs: 704
Time: 0.83s
Returned Research_orgs: 863
Time: 1.03s
Returned Research_orgs: 1000
Time: 1.01s
Returned Research_orgs: 903
Time: 0.96s
Returned Research_orgs: 896
Time: 1.10s
Returned Research_orgs: 1000
Time: 1.26s
Returned Research_orgs: 1000
Time: 1.07s
Returned Research_orgs: 476
Time: 0.81s
Returned Research_orgs: 495
Time: 0.71s
Returned Research_orgs: 369
Time: 0.75s
Returned Research_orgs: 210
Time: 0.77s
</pre></div></div>
</div>
<p>ok, can only filter on Integrers</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">top_insts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">dfl</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Step-5.-Rank-the-results">
<h3>Step 5. Rank the results<a class="headerlink" href="#Step-5.-Rank-the-results" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">top_insts</span><span class="p">[</span><span class="s1">&#39;rank&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">top_insts</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;for_name&#39;</span><span class="p">)[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">top_insts</span><span class="p">[</span><span class="n">top_insts</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;University of Melbourne&#39;</span><span class="p">][[</span><span class="s1">&#39;for_name&#39;</span><span class="p">,</span><span class="s1">&#39;rank&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>for_name</th>
      <th>rank</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>21</th>
      <td>11 Medical and Health Sciences</td>
      <td>22.0</td>
    </tr>
    <tr>
      <th>103</th>
      <td>09 Engineering</td>
      <td>107.0</td>
    </tr>
    <tr>
      <th>25</th>
      <td>06 Biological Sciences</td>
      <td>26.0</td>
    </tr>
    <tr>
      <th>99</th>
      <td>08 Information and Computing Sciences</td>
      <td>105.0</td>
    </tr>
    <tr>
      <th>161</th>
      <td>03 Chemical Sciences</td>
      <td>170.5</td>
    </tr>
    <tr>
      <th>142</th>
      <td>02 Physical Sciences</td>
      <td>150.0</td>
    </tr>
    <tr>
      <th>45</th>
      <td>01 Mathematical Sciences</td>
      <td>48.5</td>
    </tr>
    <tr>
      <th>9</th>
      <td>17 Psychology and Cognitive Sciences</td>
      <td>11.5</td>
    </tr>
    <tr>
      <th>32</th>
      <td>16 Studies in Human Society</td>
      <td>36.0</td>
    </tr>
    <tr>
      <th>66</th>
      <td>15 Commerce, Management, Tourism and Services</td>
      <td>88.0</td>
    </tr>
    <tr>
      <th>35</th>
      <td>20 Language, Communication and Culture</td>
      <td>46.0</td>
    </tr>
    <tr>
      <th>17</th>
      <td>13 Education</td>
      <td>22.5</td>
    </tr>
    <tr>
      <th>196</th>
      <td>04 Earth Sciences</td>
      <td>230.0</td>
    </tr>
    <tr>
      <th>83</th>
      <td>14 Economics</td>
      <td>110.0</td>
    </tr>
    <tr>
      <th>263</th>
      <td>21 History and Archaeology</td>
      <td>579.5</td>
    </tr>
    <tr>
      <th>30</th>
      <td>05 Environmental Sciences</td>
      <td>34.5</td>
    </tr>
    <tr>
      <th>22</th>
      <td>07 Agricultural and Veterinary Sciences</td>
      <td>26.0</td>
    </tr>
    <tr>
      <th>133</th>
      <td>22 Philosophy and Religious Studies</td>
      <td>304.0</td>
    </tr>
    <tr>
      <th>23</th>
      <td>18 Law and Legal Studies</td>
      <td>37.0</td>
    </tr>
    <tr>
      <th>20</th>
      <td>12 Built Environment and Design</td>
      <td>32.5</td>
    </tr>
    <tr>
      <th>0</th>
      <td>19 Studies in Creative Arts and Writing</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="section" id="We-should-probably-control-for-Volume-though…">
<h4>We should probably control for Volume though…<a class="headerlink" href="#We-should-probably-control-for-Volume-though…" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="Step-6.-Get-the-total-paper-counts-for-each-organisation">
<h3>Step 6. Get the total paper counts for each organisation<a class="headerlink" href="#Step-6.-Get-the-total-paper-counts-for-each-organisation" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfl</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">cutoffs</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>

  <span class="n">result</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>

<span class="s2">     search publications</span>
<span class="s2">     where</span>
<span class="s2">         year=2018</span>
<span class="s2">         and category_for.id = &quot;</span><span class="si">{</span><span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">    return research_orgs limit 1000</span>

<span class="s2">  &quot;&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">as_dataframe</span><span class="p">()</span>

  <span class="n">result</span><span class="p">[</span><span class="s1">&#39;for_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
  <span class="n">result</span><span class="p">[</span><span class="s1">&#39;for_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
  <span class="n">dfl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<br/><br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Returned Research_orgs: 1000
Time: 1.47s
Returned Research_orgs: 1000
Time: 1.12s
Returned Research_orgs: 1000
Time: 1.14s
Returned Research_orgs: 1000
Time: 1.09s
Returned Research_orgs: 1000
Time: 0.97s
Returned Research_orgs: 1000
Time: 1.17s
Returned Research_orgs: 1000
Time: 1.29s
Returned Research_orgs: 1000
Time: 1.11s
Returned Research_orgs: 1000
Time: 1.00s
Returned Research_orgs: 1000
Time: 1.02s
Returned Research_orgs: 1000
Time: 0.98s
Returned Research_orgs: 1000
Time: 0.98s
Returned Research_orgs: 1000
Time: 1.03s
Returned Research_orgs: 1000
Time: 0.98s
Returned Research_orgs: 1000
Time: 0.98s
Returned Research_orgs: 1000
Time: 1.12s
Returned Research_orgs: 1000
Time: 1.14s
Returned Research_orgs: 1000
Time: 1.15s
Returned Research_orgs: 1000
Time: 1.15s
Returned Research_orgs: 1000
Time: 1.10s
Returned Research_orgs: 1000
Time: 0.97s
Returned Research_orgs: 1000
Time: 0.96s
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">all_publications</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">dfl</span><span class="p">)[[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;for_id&#39;</span><span class="p">,</span><span class="s1">&#39;count&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">top_insts_all</span> <span class="o">=</span> <span class="n">all_publications</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;count&#39;</span><span class="p">:</span><span class="s1">&#39;count all&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">top_insts</span><span class="p">,</span> <span class="n">on</span> <span class="o">=</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;for_id&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">top_insts_all</span><span class="p">[[</span><span class="s1">&#39;for_name&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;count&#39;</span><span class="p">,</span><span class="s1">&#39;count all&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>for_name</th>
      <th>name</th>
      <th>count</th>
      <th>count all</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>11 Medical and Health Sciences</td>
      <td>Harvard University</td>
      <td>845</td>
      <td>16932</td>
    </tr>
    <tr>
      <th>1</th>
      <td>11 Medical and Health Sciences</td>
      <td>University of Toronto</td>
      <td>392</td>
      <td>10281</td>
    </tr>
    <tr>
      <th>2</th>
      <td>11 Medical and Health Sciences</td>
      <td>Johns Hopkins University</td>
      <td>391</td>
      <td>10120</td>
    </tr>
    <tr>
      <th>3</th>
      <td>11 Medical and Health Sciences</td>
      <td>University of California, San Francisco</td>
      <td>365</td>
      <td>7850</td>
    </tr>
    <tr>
      <th>4</th>
      <td>11 Medical and Health Sciences</td>
      <td>Mayo Clinic</td>
      <td>321</td>
      <td>7659</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>12220</th>
      <td>19 Studies in Creative Arts and Writing</td>
      <td>University of Bamberg</td>
      <td>1</td>
      <td>3</td>
    </tr>
    <tr>
      <th>12221</th>
      <td>19 Studies in Creative Arts and Writing</td>
      <td>National University of Quilmes</td>
      <td>1</td>
      <td>2</td>
    </tr>
    <tr>
      <th>12222</th>
      <td>19 Studies in Creative Arts and Writing</td>
      <td>Czech University of Life Sciences Prague</td>
      <td>1</td>
      <td>2</td>
    </tr>
    <tr>
      <th>12223</th>
      <td>19 Studies in Creative Arts and Writing</td>
      <td>University Hospitals of Cleveland</td>
      <td>1</td>
      <td>2</td>
    </tr>
    <tr>
      <th>12224</th>
      <td>19 Studies in Creative Arts and Writing</td>
      <td>Grinnell College</td>
      <td>1</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
<p>12225 rows × 4 columns</p>
</div></div>
</div>
</div>
<div class="section" id="Step-7.-calculate-the-percentage-of-local-papers-in-the-top-1%-of-global-publications-(in-2018)">
<h3>Step 7. calculate the percentage of local papers in the top 1% of global publications (in 2018)<a class="headerlink" href="#Step-7.-calculate-the-percentage-of-local-papers-in-the-top-1%-of-global-publications-(in-2018)" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">top_insts_all</span><span class="p">[</span><span class="s1">&#39;percentage top 1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="n">top_insts_all</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">top_insts_all</span><span class="p">[</span><span class="s1">&#39;count all&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">top_insts_all</span><span class="p">[</span><span class="s1">&#39;percent rank&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">top_insts_all</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;for_name&#39;</span><span class="p">)[</span><span class="s1">&#39;percentage top 1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="Now-the-results-are-going-to-look-a-little-strange…">
<h4>Now the results are going to look a little strange…<a class="headerlink" href="#Now-the-results-are-going-to-look-a-little-strange…" title="Permalink to this headline">¶</a></h4>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">top_insts_all</span><span class="p">[</span><span class="n">top_insts_all</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;University of Cambridge&#39;</span><span class="p">][[</span><span class="s1">&#39;for_name&#39;</span><span class="p">,</span><span class="s1">&#39;percent rank&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>for_name</th>
      <th>percent rank</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>66</th>
      <td>11 Medical and Health Sciences</td>
      <td>41.0</td>
    </tr>
    <tr>
      <th>840</th>
      <td>09 Engineering</td>
      <td>138.0</td>
    </tr>
    <tr>
      <th>1498</th>
      <td>06 Biological Sciences</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>2294</th>
      <td>08 Information and Computing Sciences</td>
      <td>475.5</td>
    </tr>
    <tr>
      <th>2875</th>
      <td>03 Chemical Sciences</td>
      <td>93.5</td>
    </tr>
    <tr>
      <th>3512</th>
      <td>02 Physical Sciences</td>
      <td>278.5</td>
    </tr>
    <tr>
      <th>4277</th>
      <td>01 Mathematical Sciences</td>
      <td>117.0</td>
    </tr>
    <tr>
      <th>4921</th>
      <td>17 Psychology and Cognitive Sciences</td>
      <td>52.5</td>
    </tr>
    <tr>
      <th>5584</th>
      <td>16 Studies in Human Society</td>
      <td>236.5</td>
    </tr>
    <tr>
      <th>6165</th>
      <td>15 Commerce, Management, Tourism and Services</td>
      <td>150.0</td>
    </tr>
    <tr>
      <th>6864</th>
      <td>10 Technology</td>
      <td>304.0</td>
    </tr>
    <tr>
      <th>7312</th>
      <td>20 Language, Communication and Culture</td>
      <td>398.5</td>
    </tr>
    <tr>
      <th>7785</th>
      <td>13 Education</td>
      <td>377.0</td>
    </tr>
    <tr>
      <th>8302</th>
      <td>04 Earth Sciences</td>
      <td>346.5</td>
    </tr>
    <tr>
      <th>8940</th>
      <td>14 Economics</td>
      <td>310.5</td>
    </tr>
    <tr>
      <th>9467</th>
      <td>21 History and Archaeology</td>
      <td>305.0</td>
    </tr>
    <tr>
      <th>10013</th>
      <td>05 Environmental Sciences</td>
      <td>123.0</td>
    </tr>
    <tr>
      <th>10741</th>
      <td>07 Agricultural and Veterinary Sciences</td>
      <td>124.5</td>
    </tr>
    <tr>
      <th>11176</th>
      <td>22 Philosophy and Religious Studies</td>
      <td>311.5</td>
    </tr>
    <tr>
      <th>11503</th>
      <td>18 Law and Legal Studies</td>
      <td>196.0</td>
    </tr>
    <tr>
      <th>11823</th>
      <td>12 Built Environment and Design</td>
      <td>181.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">top_insts_all</span><span class="p">[</span><span class="n">top_insts_all</span><span class="p">[</span><span class="s1">&#39;for_name&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;11 Medical and Health Sciences&#39;</span><span class="p">][[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;percent rank&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>percent rank</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Harvard University</td>
      <td>61.5</td>
    </tr>
    <tr>
      <th>1</th>
      <td>University of Toronto</td>
      <td>236.5</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Johns Hopkins University</td>
      <td>220.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>University of California, San Francisco</td>
      <td>93.5</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Mayo Clinic</td>
      <td>152.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>780</th>
      <td>University of Bath</td>
      <td>425.0</td>
    </tr>
    <tr>
      <th>781</th>
      <td>Kuopio University Hospital</td>
      <td>250.5</td>
    </tr>
    <tr>
      <th>782</th>
      <td>Marqués de Valdecilla University Hospital</td>
      <td>299.0</td>
    </tr>
    <tr>
      <th>783</th>
      <td>Policlinico San Matteo Fondazione</td>
      <td>114.5</td>
    </tr>
    <tr>
      <th>784</th>
      <td>Centre Hospitalier Universitaire de Caen</td>
      <td>351.5</td>
    </tr>
  </tbody>
</table>
<p>785 rows × 2 columns</p>
</div></div>
</div>
<p>Smaller institutions are being preferenced too much…</p>
</div>
<div class="section" id="Need-to-control-for-size…">
<h4>Need to control for size…<a class="headerlink" href="#Need-to-control-for-size…" title="Permalink to this headline">¶</a></h4>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">reference_institutions</span> <span class="o">=</span> <span class="n">top_insts_all</span><span class="p">[[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;for_id&#39;</span><span class="p">,</span><span class="s1">&#39;count all&#39;</span><span class="p">]]</span><span class="o">.</span>\
     <span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;reference id&#39;</span><span class="p">,</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;reference name&#39;</span><span class="p">,</span>
           <span class="s1">&#39;count all&#39;</span><span class="p">:</span><span class="s1">&#39;reference count all&#39;</span>
           <span class="p">})</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">relative_ranking</span> <span class="o">=</span> <span class="n">reference_institutions</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">top_insts_all</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;for_id&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">relative_ranking</span><span class="p">[</span><span class="n">relative_ranking</span><span class="p">[</span><span class="s1">&#39;reference name&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;University of Melbourne&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>reference id</th>
      <th>reference name</th>
      <th>for_id</th>
      <th>reference count all</th>
      <th>id</th>
      <th>count all</th>
      <th>city_name</th>
      <th>count</th>
      <th>country_name</th>
      <th>latitude</th>
      <th>linkout</th>
      <th>longitude</th>
      <th>name</th>
      <th>state_name</th>
      <th>types</th>
      <th>acronym</th>
      <th>for_name</th>
      <th>rank</th>
      <th>percentage top 1</th>
      <th>percent rank</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>15700</th>
      <td>grid.1008.9</td>
      <td>University of Melbourne</td>
      <td>2211</td>
      <td>5457</td>
      <td>grid.38142.3c</td>
      <td>16932</td>
      <td>Cambridge</td>
      <td>845</td>
      <td>United States</td>
      <td>42.377052</td>
      <td>[http://www.harvard.edu/]</td>
      <td>-71.116650</td>
      <td>Harvard University</td>
      <td>Massachusetts</td>
      <td>[Education]</td>
      <td>NaN</td>
      <td>11 Medical and Health Sciences</td>
      <td>1.0</td>
      <td>4.99</td>
      <td>61.5</td>
    </tr>
    <tr>
      <th>15701</th>
      <td>grid.1008.9</td>
      <td>University of Melbourne</td>
      <td>2211</td>
      <td>5457</td>
      <td>grid.17063.33</td>
      <td>10281</td>
      <td>Toronto</td>
      <td>392</td>
      <td>Canada</td>
      <td>43.661667</td>
      <td>[http://www.utoronto.ca/]</td>
      <td>-79.395000</td>
      <td>University of Toronto</td>
      <td>Ontario</td>
      <td>[Education]</td>
      <td>NaN</td>
      <td>11 Medical and Health Sciences</td>
      <td>2.0</td>
      <td>3.81</td>
      <td>236.5</td>
    </tr>
    <tr>
      <th>15702</th>
      <td>grid.1008.9</td>
      <td>University of Melbourne</td>
      <td>2211</td>
      <td>5457</td>
      <td>grid.21107.35</td>
      <td>10120</td>
      <td>Baltimore</td>
      <td>391</td>
      <td>United States</td>
      <td>39.328888</td>
      <td>[https://www.jhu.edu/]</td>
      <td>-76.620280</td>
      <td>Johns Hopkins University</td>
      <td>Maryland</td>
      <td>[Education]</td>
      <td>JHU</td>
      <td>11 Medical and Health Sciences</td>
      <td>3.0</td>
      <td>3.86</td>
      <td>220.0</td>
    </tr>
    <tr>
      <th>15703</th>
      <td>grid.1008.9</td>
      <td>University of Melbourne</td>
      <td>2211</td>
      <td>5457</td>
      <td>grid.266102.1</td>
      <td>7850</td>
      <td>San Francisco</td>
      <td>365</td>
      <td>United States</td>
      <td>37.762800</td>
      <td>[https://www.ucsf.edu/]</td>
      <td>-122.457670</td>
      <td>University of California, San Francisco</td>
      <td>California</td>
      <td>[Education]</td>
      <td>UCSF</td>
      <td>11 Medical and Health Sciences</td>
      <td>6.0</td>
      <td>4.65</td>
      <td>93.5</td>
    </tr>
    <tr>
      <th>15704</th>
      <td>grid.1008.9</td>
      <td>University of Melbourne</td>
      <td>2211</td>
      <td>5457</td>
      <td>grid.66875.3a</td>
      <td>7659</td>
      <td>Rochester</td>
      <td>321</td>
      <td>United States</td>
      <td>44.024070</td>
      <td>[http://www.mayoclinic.org/patient-visitor-gui...</td>
      <td>-92.466310</td>
      <td>Mayo Clinic</td>
      <td>Minnesota</td>
      <td>[Healthcare]</td>
      <td>NaN</td>
      <td>11 Medical and Health Sciences</td>
      <td>10.0</td>
      <td>4.19</td>
      <td>152.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>7350128</th>
      <td>grid.1008.9</td>
      <td>University of Melbourne</td>
      <td>2219</td>
      <td>85</td>
      <td>grid.7359.8</td>
      <td>3</td>
      <td>Bamberg</td>
      <td>1</td>
      <td>Germany</td>
      <td>49.893845</td>
      <td>[https://www.uni-bamberg.de/]</td>
      <td>10.886044</td>
      <td>University of Bamberg</td>
      <td>NaN</td>
      <td>[Education]</td>
      <td>NaN</td>
      <td>19 Studies in Creative Arts and Writing</td>
      <td>130.0</td>
      <td>33.33</td>
      <td>8.0</td>
    </tr>
    <tr>
      <th>7350129</th>
      <td>grid.1008.9</td>
      <td>University of Melbourne</td>
      <td>2219</td>
      <td>85</td>
      <td>grid.11560.33</td>
      <td>2</td>
      <td>Bernal</td>
      <td>1</td>
      <td>Argentina</td>
      <td>-34.706670</td>
      <td>[http://www.unq.edu.ar/english/sections/158-unq/]</td>
      <td>-58.277500</td>
      <td>National University of Quilmes</td>
      <td>NaN</td>
      <td>[Education]</td>
      <td>UNQ</td>
      <td>19 Studies in Creative Arts and Writing</td>
      <td>130.0</td>
      <td>50.00</td>
      <td>2.5</td>
    </tr>
    <tr>
      <th>7350130</th>
      <td>grid.1008.9</td>
      <td>University of Melbourne</td>
      <td>2219</td>
      <td>85</td>
      <td>grid.15866.3c</td>
      <td>2</td>
      <td>Prague</td>
      <td>1</td>
      <td>Czechia</td>
      <td>50.131460</td>
      <td>[http://www.czu.cz/en/]</td>
      <td>14.373258</td>
      <td>Czech University of Life Sciences Prague</td>
      <td>NaN</td>
      <td>[Education]</td>
      <td>CULS</td>
      <td>19 Studies in Creative Arts and Writing</td>
      <td>130.0</td>
      <td>50.00</td>
      <td>2.5</td>
    </tr>
    <tr>
      <th>7350131</th>
      <td>grid.1008.9</td>
      <td>University of Melbourne</td>
      <td>2219</td>
      <td>85</td>
      <td>grid.241104.2</td>
      <td>2</td>
      <td>Cleveland</td>
      <td>1</td>
      <td>United States</td>
      <td>41.506096</td>
      <td>[http://www.uhhospitals.org/]</td>
      <td>-81.604820</td>
      <td>University Hospitals of Cleveland</td>
      <td>Ohio</td>
      <td>[Healthcare]</td>
      <td>NaN</td>
      <td>19 Studies in Creative Arts and Writing</td>
      <td>130.0</td>
      <td>50.00</td>
      <td>2.5</td>
    </tr>
    <tr>
      <th>7350132</th>
      <td>grid.1008.9</td>
      <td>University of Melbourne</td>
      <td>2219</td>
      <td>85</td>
      <td>grid.256592.f</td>
      <td>2</td>
      <td>Grinnell</td>
      <td>1</td>
      <td>United States</td>
      <td>41.749737</td>
      <td>[http://www.grinnell.edu/]</td>
      <td>-92.719505</td>
      <td>Grinnell College</td>
      <td>Iowa</td>
      <td>[Education]</td>
      <td>NaN</td>
      <td>19 Studies in Creative Arts and Writing</td>
      <td>130.0</td>
      <td>50.00</td>
      <td>2.5</td>
    </tr>
  </tbody>
</table>
<p>11685 rows × 20 columns</p>
</div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filtered_relative_ranking</span> <span class="o">=</span> <span class="n">relative_ranking</span><span class="p">[</span><span class="n">relative_ranking</span><span class="p">[</span>
                                      <span class="s1">&#39;reference count all&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">relative_ranking</span><span class="p">[</span><span class="s1">&#39;count all&#39;</span><span class="p">]</span>
                                      <span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filtered_relative_ranking</span><span class="p">[</span><span class="s1">&#39;filtered percent rank&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">filtered_relative_ranking</span><span class="o">.</span>\
                                                   <span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;reference id&#39;</span><span class="p">,</span><span class="s1">&#39;for_name&#39;</span><span class="p">])[</span><span class="s1">&#39;percentage top 1&#39;</span><span class="p">]</span><span class="o">.</span>\
                                                   <span class="n">rank</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">inst</span> <span class="o">=</span> <span class="s1">&#39;University of Melbourne&#39;</span>

<span class="n">filtered_relative_ranking</span><span class="p">[</span>

                          <span class="p">(</span><span class="n">filtered_relative_ranking</span><span class="p">[</span><span class="s1">&#39;reference name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">inst</span><span class="p">)</span> <span class="o">&amp;</span>
                          <span class="p">(</span><span class="n">filtered_relative_ranking</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">inst</span><span class="p">)</span>

                         <span class="p">][[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;for_id&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;for_name&#39;</span><span class="p">,</span><span class="s1">&#39;filtered percent rank&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>for_id</th>
      <th>name</th>
      <th>for_name</th>
      <th>filtered percent rank</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>15720</th>
      <td>grid.1008.9</td>
      <td>2211</td>
      <td>University of Melbourne</td>
      <td>11 Medical and Health Sciences</td>
      <td>15.5</td>
    </tr>
    <tr>
      <th>738709</th>
      <td>grid.1008.9</td>
      <td>2209</td>
      <td>University of Melbourne</td>
      <td>09 Engineering</td>
      <td>40.0</td>
    </tr>
    <tr>
      <th>1131875</th>
      <td>grid.1008.9</td>
      <td>2206</td>
      <td>University of Melbourne</td>
      <td>06 Biological Sciences</td>
      <td>13.0</td>
    </tr>
    <tr>
      <th>1643602</th>
      <td>grid.1008.9</td>
      <td>2208</td>
      <td>University of Melbourne</td>
      <td>08 Information and Computing Sciences</td>
      <td>45.0</td>
    </tr>
    <tr>
      <th>2140491</th>
      <td>grid.1008.9</td>
      <td>2203</td>
      <td>University of Melbourne</td>
      <td>03 Chemical Sciences</td>
      <td>87.5</td>
    </tr>
    <tr>
      <th>2627450</th>
      <td>grid.1008.9</td>
      <td>2202</td>
      <td>University of Melbourne</td>
      <td>02 Physical Sciences</td>
      <td>49.0</td>
    </tr>
    <tr>
      <th>3094798</th>
      <td>grid.1008.9</td>
      <td>2201</td>
      <td>University of Melbourne</td>
      <td>01 Mathematical Sciences</td>
      <td>18.0</td>
    </tr>
    <tr>
      <th>3454060</th>
      <td>grid.1008.9</td>
      <td>2217</td>
      <td>University of Melbourne</td>
      <td>17 Psychology and Cognitive Sciences</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>3909944</th>
      <td>grid.1008.9</td>
      <td>2216</td>
      <td>University of Melbourne</td>
      <td>16 Studies in Human Society</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>4225053</th>
      <td>grid.1008.9</td>
      <td>2215</td>
      <td>University of Melbourne</td>
      <td>15 Commerce, Management, Tourism and Services</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>4915245</th>
      <td>grid.1008.9</td>
      <td>2220</td>
      <td>University of Melbourne</td>
      <td>20 Language, Communication and Culture</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>5111347</th>
      <td>grid.1008.9</td>
      <td>2213</td>
      <td>University of Melbourne</td>
      <td>13 Education</td>
      <td>8.0</td>
    </tr>
    <tr>
      <th>5429203</th>
      <td>grid.1008.9</td>
      <td>2204</td>
      <td>University of Melbourne</td>
      <td>04 Earth Sciences</td>
      <td>64.0</td>
    </tr>
    <tr>
      <th>5817193</th>
      <td>grid.1008.9</td>
      <td>2214</td>
      <td>University of Melbourne</td>
      <td>14 Economics</td>
      <td>13.0</td>
    </tr>
    <tr>
      <th>6111107</th>
      <td>grid.1008.9</td>
      <td>2221</td>
      <td>University of Melbourne</td>
      <td>21 History and Archaeology</td>
      <td>22.0</td>
    </tr>
    <tr>
      <th>6352914</th>
      <td>grid.1008.9</td>
      <td>2205</td>
      <td>University of Melbourne</td>
      <td>05 Environmental Sciences</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>6797399</th>
      <td>grid.1008.9</td>
      <td>2207</td>
      <td>University of Melbourne</td>
      <td>07 Agricultural and Veterinary Sciences</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>7091867</th>
      <td>grid.1008.9</td>
      <td>2222</td>
      <td>University of Melbourne</td>
      <td>22 Philosophy and Religious Studies</td>
      <td>13.0</td>
    </tr>
    <tr>
      <th>7194418</th>
      <td>grid.1008.9</td>
      <td>2218</td>
      <td>University of Melbourne</td>
      <td>18 Law and Legal Studies</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>7281134</th>
      <td>grid.1008.9</td>
      <td>2212</td>
      <td>University of Melbourne</td>
      <td>12 Built Environment and Design</td>
      <td>7.0</td>
    </tr>
    <tr>
      <th>7349969</th>
      <td>grid.1008.9</td>
      <td>2219</td>
      <td>University of Melbourne</td>
      <td>19 Studies in Creative Arts and Writing</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="Final-step.-Show-me-the-institutions-that-I-should-be-most-interested-in-(Five-above)">
<h3>Final step. Show me the institutions that I should be most interested in (Five above)<a class="headerlink" href="#Final-step.-Show-me-the-institutions-that-I-should-be-most-interested-in-(Five-above)" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rank_cutoffs</span> <span class="o">=</span> <span class="n">filtered_relative_ranking</span><span class="p">[</span>

                          <span class="p">(</span><span class="n">filtered_relative_ranking</span><span class="p">[</span><span class="s1">&#39;reference name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">filtered_relative_ranking</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="p">)</span>

                         <span class="p">][[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;for_id&#39;</span><span class="p">,</span> <span class="s1">&#39;filtered percent rank&#39;</span><span class="p">]]</span><span class="o">.</span>\
                         <span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;reference id&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;filtered percent rank&#39;</span><span class="p">:</span><span class="s1">&#39;reference filtered percent rank&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filtered_relative_ranking_final</span> <span class="o">=</span> <span class="n">rank_cutoffs</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">filtered_relative_ranking</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;reference id&#39;</span><span class="p">,</span><span class="s1">&#39;for_id&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[44]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filtered_relative_ranking_final</span><span class="p">[</span><span class="s1">&#39;rank_difference&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">filtered_relative_ranking_final</span><span class="p">[</span><span class="s1">&#39;filtered percent rank&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">filtered_relative_ranking_final</span><span class="p">[</span><span class="s1">&#39;reference filtered percent rank&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[45]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">inst</span> <span class="o">=</span> <span class="s1">&#39;Monash University&#39;</span>
<span class="n">forname</span> <span class="o">=</span> <span class="s1">&#39;11 Medical and Health Sciences&#39;</span>

<span class="n">filtered_relative_ranking_final</span><span class="p">[</span>

                                 <span class="p">(</span><span class="n">filtered_relative_ranking_final</span><span class="p">[</span><span class="s1">&#39;rank_difference&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">between</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span> <span class="o">&amp;</span>
                                 <span class="p">(</span><span class="n">filtered_relative_ranking_final</span><span class="p">[</span><span class="s1">&#39;reference name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">inst</span><span class="p">)</span> <span class="o">&amp;</span>
                                 <span class="p">(</span><span class="n">filtered_relative_ranking_final</span><span class="p">[</span><span class="s1">&#39;for_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">forname</span><span class="p">)</span>

                                 <span class="p">][[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;filtered percent rank&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;filtered percent rank&#39;</span><span class="p">)</span>
<br/><br/><br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[45]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>filtered percent rank</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>515</th>
      <td>University of Michigan</td>
      <td>24.5</td>
    </tr>
    <tr>
      <th>524</th>
      <td>Karolinska Institute</td>
      <td>24.5</td>
    </tr>
    <tr>
      <th>523</th>
      <td>Emory University</td>
      <td>26.0</td>
    </tr>
    <tr>
      <th>528</th>
      <td>University of Pittsburgh</td>
      <td>27.0</td>
    </tr>
    <tr>
      <th>521</th>
      <td>University of Sydney</td>
      <td>28.0</td>
    </tr>
    <tr>
      <th>538</th>
      <td>Monash University</td>
      <td>29.0</td>
    </tr>
    <tr>
      <th>533</th>
      <td>University of British Columbia</td>
      <td>30.0</td>
    </tr>
    <tr>
      <th>520</th>
      <td>University of São Paulo</td>
      <td>31.0</td>
    </tr>
    <tr>
      <th>534</th>
      <td>Shanghai Jiao Tong University</td>
      <td>32.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[46]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filtered_relative_ranking_final</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[46]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>reference id</th>
      <th>for_id</th>
      <th>reference filtered percent rank</th>
      <th>reference name</th>
      <th>reference count all</th>
      <th>id</th>
      <th>count all</th>
      <th>city_name</th>
      <th>count</th>
      <th>country_name</th>
      <th>...</th>
      <th>name</th>
      <th>state_name</th>
      <th>types</th>
      <th>acronym</th>
      <th>for_name</th>
      <th>rank</th>
      <th>percentage top 1</th>
      <th>percent rank</th>
      <th>filtered percent rank</th>
      <th>rank_difference</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>grid.38142.3c</td>
      <td>2211</td>
      <td>1.0</td>
      <td>Harvard University</td>
      <td>16932</td>
      <td>grid.38142.3c</td>
      <td>16932</td>
      <td>Cambridge</td>
      <td>845</td>
      <td>United States</td>
      <td>...</td>
      <td>Harvard University</td>
      <td>Massachusetts</td>
      <td>[Education]</td>
      <td>NaN</td>
      <td>11 Medical and Health Sciences</td>
      <td>1.0</td>
      <td>4.99</td>
      <td>61.5</td>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>grid.17063.33</td>
      <td>2211</td>
      <td>2.0</td>
      <td>University of Toronto</td>
      <td>10281</td>
      <td>grid.38142.3c</td>
      <td>16932</td>
      <td>Cambridge</td>
      <td>845</td>
      <td>United States</td>
      <td>...</td>
      <td>Harvard University</td>
      <td>Massachusetts</td>
      <td>[Education]</td>
      <td>NaN</td>
      <td>11 Medical and Health Sciences</td>
      <td>1.0</td>
      <td>4.99</td>
      <td>61.5</td>
      <td>1.0</td>
      <td>-1.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>grid.17063.33</td>
      <td>2211</td>
      <td>2.0</td>
      <td>University of Toronto</td>
      <td>10281</td>
      <td>grid.17063.33</td>
      <td>10281</td>
      <td>Toronto</td>
      <td>392</td>
      <td>Canada</td>
      <td>...</td>
      <td>University of Toronto</td>
      <td>Ontario</td>
      <td>[Education]</td>
      <td>NaN</td>
      <td>11 Medical and Health Sciences</td>
      <td>2.0</td>
      <td>3.81</td>
      <td>236.5</td>
      <td>2.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>grid.21107.35</td>
      <td>2211</td>
      <td>2.0</td>
      <td>Johns Hopkins University</td>
      <td>10120</td>
      <td>grid.38142.3c</td>
      <td>16932</td>
      <td>Cambridge</td>
      <td>845</td>
      <td>United States</td>
      <td>...</td>
      <td>Harvard University</td>
      <td>Massachusetts</td>
      <td>[Education]</td>
      <td>NaN</td>
      <td>11 Medical and Health Sciences</td>
      <td>1.0</td>
      <td>4.99</td>
      <td>61.5</td>
      <td>1.0</td>
      <td>-1.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>grid.21107.35</td>
      <td>2211</td>
      <td>2.0</td>
      <td>Johns Hopkins University</td>
      <td>10120</td>
      <td>grid.17063.33</td>
      <td>10281</td>
      <td>Toronto</td>
      <td>392</td>
      <td>Canada</td>
      <td>...</td>
      <td>University of Toronto</td>
      <td>Ontario</td>
      <td>[Education]</td>
      <td>NaN</td>
      <td>11 Medical and Health Sciences</td>
      <td>2.0</td>
      <td>3.81</td>
      <td>236.5</td>
      <td>3.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>3721588</th>
      <td>grid.256592.f</td>
      <td>2219</td>
      <td>2.5</td>
      <td>Grinnell College</td>
      <td>2</td>
      <td>grid.7359.8</td>
      <td>3</td>
      <td>Bamberg</td>
      <td>1</td>
      <td>Germany</td>
      <td>...</td>
      <td>University of Bamberg</td>
      <td>NaN</td>
      <td>[Education]</td>
      <td>NaN</td>
      <td>19 Studies in Creative Arts and Writing</td>
      <td>130.0</td>
      <td>33.33</td>
      <td>8.0</td>
      <td>8.0</td>
      <td>5.5</td>
    </tr>
    <tr>
      <th>3721589</th>
      <td>grid.256592.f</td>
      <td>2219</td>
      <td>2.5</td>
      <td>Grinnell College</td>
      <td>2</td>
      <td>grid.11560.33</td>
      <td>2</td>
      <td>Bernal</td>
      <td>1</td>
      <td>Argentina</td>
      <td>...</td>
      <td>National University of Quilmes</td>
      <td>NaN</td>
      <td>[Education]</td>
      <td>UNQ</td>
      <td>19 Studies in Creative Arts and Writing</td>
      <td>130.0</td>
      <td>50.00</td>
      <td>2.5</td>
      <td>2.5</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3721590</th>
      <td>grid.256592.f</td>
      <td>2219</td>
      <td>2.5</td>
      <td>Grinnell College</td>
      <td>2</td>
      <td>grid.15866.3c</td>
      <td>2</td>
      <td>Prague</td>
      <td>1</td>
      <td>Czechia</td>
      <td>...</td>
      <td>Czech University of Life Sciences Prague</td>
      <td>NaN</td>
      <td>[Education]</td>
      <td>CULS</td>
      <td>19 Studies in Creative Arts and Writing</td>
      <td>130.0</td>
      <td>50.00</td>
      <td>2.5</td>
      <td>2.5</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3721591</th>
      <td>grid.256592.f</td>
      <td>2219</td>
      <td>2.5</td>
      <td>Grinnell College</td>
      <td>2</td>
      <td>grid.241104.2</td>
      <td>2</td>
      <td>Cleveland</td>
      <td>1</td>
      <td>United States</td>
      <td>...</td>
      <td>University Hospitals of Cleveland</td>
      <td>Ohio</td>
      <td>[Healthcare]</td>
      <td>NaN</td>
      <td>19 Studies in Creative Arts and Writing</td>
      <td>130.0</td>
      <td>50.00</td>
      <td>2.5</td>
      <td>2.5</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3721592</th>
      <td>grid.256592.f</td>
      <td>2219</td>
      <td>2.5</td>
      <td>Grinnell College</td>
      <td>2</td>
      <td>grid.256592.f</td>
      <td>2</td>
      <td>Grinnell</td>
      <td>1</td>
      <td>United States</td>
      <td>...</td>
      <td>Grinnell College</td>
      <td>Iowa</td>
      <td>[Education]</td>
      <td>NaN</td>
      <td>19 Studies in Creative Arts and Writing</td>
      <td>130.0</td>
      <td>50.00</td>
      <td>2.5</td>
      <td>2.5</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>3721593 rows × 23 columns</p>
</div></div>
</div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference external" href="https://www.dimensions.ai/dimensions-apis/">Dimensions Analytics API</a> allows to carry out sophisticated research data analytics tasks like the ones described on this website. Check out also the associated <a class="reference external" href="https://github.com/digital-science/dimensions-api-lab">Github repository</a> for examples, the source code of these tutorials and much more.</p>
</div>
<a class="reference external image-reference" href="https://www.dimensions.ai/dimensions-apis/"><img alt="../../_images/badge-dimensions-api.svg" src="../../_images/badge-dimensions-api.svg" /></a>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    <p>© Copyright 2020 Digital Science & Research Solutions, Inc. All Rights Reserved | <a href="https://www.dimensions.ai/">About us</a> · <a href="https://www.dimensions.ai/privacy/">Privacy policy</a> · <a href="https://www.dimensions.ai/website-terms/">Legal terms</a></p>
     

    <!-- OneTrust Cookies Settings button start -->
    <button id="ot-sdk-btn" class="ot-sdk-show-settings">Cookie Settings</button>
    <!-- OneTrust Cookies Settings button end -->



</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
    

    <!-- Adds target=_blank to external links -->

  <script type="text/javascript">
    $(document).ready(function () {
      $('a[href^="http://"], a[href^="https://"]').not('a[class*=internal]').attr('target', '_blank');
    });
  </script>


  <!-- OneTrust Cookies Consent Notice start for dimensions.ai -->
   <script type="text/javascript" src="https://cdn.cookielaw.org/consent/3329b668-7887-4dba-9bee-c3853a706e6f/OtAutoBlock.js" ></script>
   <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="3329b668-7887-4dba-9bee-c3853a706e6f" ></script>
   <script type="text/javascript">
   function OptanonWrapper() { }
   </script>
   <!-- OneTrust Cookies Consent Notice end for dimensions.ai -->
  


</body>
</html>